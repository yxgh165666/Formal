-- Base64 解码器（Roblox 可用）
local b64chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
local b64lookup = {}
for i = 1, #b64chars do
    b64lookup[b64chars:sub(i, i)] = i - 1
end

local function base64_decode(data)
    data = data:gsub('[^%w%+%/%=]', '')
    local result = {}
    local n = 1
    while n <= #data do
        local a = b64lookup[data:sub(n, n)]
        local b = b64lookup[data:sub(n+1, n+1)]
        local c = b64lookup[data:sub(n+2, n+2)]
        local d = b64lookup[data:sub(n+3, n+3)]

        local x = (a * 262144) + (b * 4096) + ((c or 0) * 64) + (d or 0)
        result[#result+1] = string.char(
            math.floor(x / 65536) % 256,
            math.floor(x / 256) % 256,
            x % 256
        )
        n = n + 4
    end

    local pad = select(2, data:gsub('=', '='))
    if pad == 2 then
        result[#result] = result[#result]:sub(1, 1)
    elseif pad == 1 then
        result[#result] = result[#result]:sub(1, 2)
    end

    return table.concat(result)
end

-- ✅ 示例：解码并执行（仅限你自己的脚本）
local decoded = base64_decode("bG9jYWwgUmF5ZmllbGQgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgnaHR0cHM6Ly9zaXJpdXMubWVudS9yYXlmaWVsZCcpKSgpCgotLSDkvb/nlKggUmF5ZmllbGQg5YaF572u5a+G6ZKl57O757ufCmxvY2FsIFdpbmRvdyA9IFJheWZpZWxkOkNyZWF0ZVdpbmRvdyh7CiAgICBOYW1lID0gIuWdpOWdpOWkp+W4neiEmuacrCAtICIgLi4gKGlkZW50aWZ5ZXhlY3V0b3IgYW5kIGlkZW50aWZ5ZXhlY3V0b3IoKSBvciAi5pyq55+l5omn6KGM5ZmoIiksCiAgICBMb2FkaW5nVGl0bGUgPSAi5Z2k5Z2k5aSn5bid6ISa5pys5Yqg6L295LitIiwKICAgIExvYWRpbmdTdWJ0aXRsZSA9ICLlsIrkuqvnibnmnYPniYgiLAogICAgQ29uZmlndXJhdGlvblNhdmluZyA9IHsKICAgICAgICBFbmFibGVkID0gdHJ1ZSwKICAgICAgICBGb2xkZXJOYW1lID0gIlN0aXRjaENvbmZpZyIsCiAgICAgICAgRmlsZU5hbWUgPSAiU2V0dGluZ3MiCiAgICB9LAogICAgRGlzY29yZCA9IHsKICAgICAgICBFbmFibGVkID0gZmFsc2UsCiAgICAgICAgSW52aXRlID0gImh0dHBzOi8vZGlzY29yZC5nZy8iLAogICAgICAgIFJlbWVtYmVySm9pbnMgPSB0cnVlCiAgICB9LAogICAgS2V5U3lzdGVtID0gdHJ1ZSwgLS0g5ZCv55So5YaF572u5a+G6ZKl57O757ufCiAgICBLZXlTZXR0aW5ncyA9IHsKICAgICAgICBUaXRsZSA9ICLlnaTlnaTlpKfluJ3ohJrmnKzpqozor4EiLAogICAgICAgIFN1YnRpdGxlID0gIuivt+i+k+WFpeacieaViOWvhumSpSIsCiAgICAgICAgTm90ZSA9ICLmsqHmnInlr4bpkqXvvJ/liqDlhaVEaXNjb3Jk6I635Y+WIiwKICAgICAgICBGaWxlTmFtZSA9ICJTdGl0Y2hLZXkiLAogICAgICAgIFNhdmVLZXkgPSB0cnVlLAogICAgICAgIEdyYWJLZXlGcm9tU2l0ZSA9IGZhbHNlLAogICAgICAgIEtleSA9IHsiMjAyNSIsICI2NjYiLCAiS1VOS1VONjY2IiwgIjY2NmZyZWUiLCAiVEFJWU9VWUlTSUxFIn0gLS0g5pyJ5pWI5a+G6ZKl5YiX6KGoCiAgICB9Cn0pCgotLSDlnaTlnaTlpKfluJ3ohJrmnKzlvLnmgKfliqjnlLsKbG9jYWwgZnVuY3Rpb24gQ3JlYXRlS3VuS3VuQW5pbWF0aW9uKCkKICAgIC0tIOWIm+W7uuWFqOWxj+iDjOaZrwogICAgbG9jYWwgYmcgPSBEcmF3aW5nLm5ldygiU3F1YXJlIikKICAgIGJnLlNpemUgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5WaWV3cG9ydFNpemUKICAgIGJnLlBvc2l0aW9uID0gVmVjdG9yMi5uZXcoMCwgMCkKICAgIGJnLkNvbG9yID0gQ29sb3IzLm5ldygwLCAwLCAwKQogICAgYmcuRmlsbGVkID0gdHJ1ZQogICAgYmcuVHJhbnNwYXJlbmN5ID0gMQogICAgYmcuVmlzaWJsZSA9IHRydWUKICAgIGJnLlpJbmRleCA9IDk5OQogICAgCiAgICAtLSDliJvlu7rlnaTlnaTlpKfluJ3mloflrZcKICAgIGxvY2FsIHRleHQgPSBEcmF3aW5nLm5ldygiVGV4dCIpCiAgICB0ZXh0LlRleHQgPSAi5Z2k5Z2k5aSn5bid6ISa5pysIgogICAgdGV4dC5TaXplID0gMTAwCiAgICB0ZXh0LkNlbnRlciA9IHRydWUKICAgIHRleHQuUG9zaXRpb24gPSBWZWN0b3IyLm5ldyh3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5WaWV3cG9ydFNpemUuWC8yLCAtMjAwKQogICAgdGV4dC5Db2xvciA9IENvbG9yMy5uZXcoMSwgMC4yLCAwLjIpCiAgICB0ZXh0Lk91dGxpbmUgPSB0cnVlCiAgICB0ZXh0Lk91dGxpbmVDb2xvciA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICAgIHRleHQuVHJhbnNwYXJlbmN5ID0gMAogICAgdGV4dC5WaXNpYmxlID0gdHJ1ZQogICAgdGV4dC5aSW5kZXggPSAxMDAwCiAgICAKICAgIC0tIOWIm+W7uuWJr+agh+mimAogICAgbG9jYWwgc3ViVGV4dCA9IERyYXdpbmcubmV3KCJUZXh0IikKICAgIHN1YlRleHQuVGV4dCA9ICLlsIrkuqvnibnmnYPniYggLSDlkK/liqjmiJDlip8iCiAgICBzdWJUZXh0LlNpemUgPSA0MAogICAgc3ViVGV4dC5DZW50ZXIgPSB0cnVlCiAgICBzdWJUZXh0LlBvc2l0aW9uID0gVmVjdG9yMi5uZXcod29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuVmlld3BvcnRTaXplLlgvMiwgLTEwMCkKICAgIHN1YlRleHQuQ29sb3IgPSBDb2xvcjMubmV3KDAuOCwgMC44LCAxKQogICAgc3ViVGV4dC5PdXRsaW5lID0gdHJ1ZQogICAgc3ViVGV4dC5PdXRsaW5lQ29sb3IgPSBDb2xvcjMubmV3KDAuMiwgMC4yLCAwLjIpCiAgICBzdWJUZXh0LlRyYW5zcGFyZW5jeSA9IDAKICAgIHN1YlRleHQuVmlzaWJsZSA9IHRydWUKICAgIHN1YlRleHQuWkluZGV4ID0gMTAwMAogICAgCiAgICAtLSDlvLnmgKfliqjnlLvlh73mlbAKICAgIGxvY2FsIGZ1bmN0aW9uIGVsYXN0aWNBbmltYXRpb24ob2JqLCB0YXJnZXRZLCBkdXJhdGlvbikKICAgICAgICBsb2NhbCBzdGFydFkgPSBvYmouUG9zaXRpb24uWQogICAgICAgIGxvY2FsIHN0YXJ0VGltZSA9IHRpY2soKQogICAgICAgIGxvY2FsIGRhbXBpbmcgPSAwLjcKICAgICAgICBsb2NhbCBzdGlmZm5lc3MgPSAwLjMKICAgICAgICAKICAgICAgICBsb2NhbCBjb25uZWN0aW9uCiAgICAgICAgY29ubmVjdGlvbiA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIGVsYXBzZWQgPSB0aWNrKCkgLSBzdGFydFRpbWUKICAgICAgICAgICAgbG9jYWwgcHJvZ3Jlc3MgPSBlbGFwc2VkIC8gZHVyYXRpb24KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHByb2dyZXNzID49IDEgdGhlbgogICAgICAgICAgICAgICAgb2JqLlBvc2l0aW9uID0gVmVjdG9yMi5uZXcob2JqLlBvc2l0aW9uLlgsIHRhcmdldFkpCiAgICAgICAgICAgICAgICBjb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgb3ZlcnNob290ID0gbWF0aC5zaW4ocHJvZ3Jlc3MgKiBtYXRoLnBpICogNCkgKiAoMSAtIHByb2dyZXNzKQogICAgICAgICAgICBsb2NhbCBuZXdZID0gdGFyZ2V0WSArIChzdGFydFkgLSB0YXJnZXRZKSAqIG1hdGgucG93KDEgLSBwcm9ncmVzcywgMikgKiBvdmVyc2hvb3QgKiBzdGlmZm5lc3MKICAgICAgICAgICAgc3RpZmZuZXNzID0gc3RpZmZuZXNzICogZGFtcGluZwogICAgICAgICAgICBvYmouUG9zaXRpb24gPSBWZWN0b3IyLm5ldyhvYmouUG9zaXRpb24uWCwgbmV3WSkKICAgICAgICBlbmQpCiAgICBlbmQKICAgIAogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIGZvciBpID0gMCwgMSwgMC4wNSBkbwogICAgICAgICAgICBiZy5UcmFuc3BhcmVuY3kgPSAxIC0gaSAqIDAuNwogICAgICAgICAgICB3YWl0KDAuMDEpCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgZWxhc3RpY0FuaW1hdGlvbih0ZXh0LCB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5WaWV3cG9ydFNpemUuWS8yIC0gMTAwLCAxLjUpCiAgICAgICAgCiAgICAgICAgd2FpdCgwLjIpCiAgICAgICAgZWxhc3RpY0FuaW1hdGlvbihzdWJUZXh0LCB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5WaWV3cG9ydFNpemUuWS8yICsgMjAsIDEuMykKICAgICAgICAKICAgICAgICB3YWl0KDMuNSkKICAgICAgICAKICAgICAgICBmb3IgaSA9IDAsIDEsIDAuMDUgZG8KICAgICAgICAgICAgdGV4dC5UcmFuc3BhcmVuY3kgPSBpCiAgICAgICAgICAgIHN1YlRleHQuVHJhbnNwYXJlbmN5ID0gaQogICAgICAgICAgICBiZy5UcmFuc3BhcmVuY3kgPSAwLjMgKyBpICogMC43CiAgICAgICAgICAgIHdhaXQoMC4wMSkKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBiZzpSZW1vdmUoKQogICAgICAgIHRleHQ6UmVtb3ZlKCkKICAgICAgICBzdWJUZXh0OlJlbW92ZSgpCiAgICBlbmQpCmVuZAoKLS0g5aSN5Yi25Yiw5Ymq6LS05p2/5Ye95pWwCmxvY2FsIGZ1bmN0aW9uIENvcHlUb0NsaXBib2FyZCh0ZXh0KQogICAgaWYgc2V0Y2xpcGJvYXJkIHRoZW4KICAgICAgICBzZXRjbGlwYm9hcmQodGV4dCkKICAgICAgICByZXR1cm4gdHJ1ZQogICAgZWxzZWlmIHdyaXRlY2xpcGJvYXJkIHRoZW4KICAgICAgICB3cml0ZWNsaXBib2FyZCh0ZXh0KQogICAgICAgIHJldHVybiB0cnVlCiAgICBlbHNlaWYgdG9jbGlwYm9hcmQgdGhlbgogICAgICAgIHRvY2xpcGJvYXJkKHRleHQpCiAgICAgICAgcmV0dXJuIHRydWUKICAgIGVsc2UKICAgICAgICBwcmludCgiW+WkjeWItuWGheWuuV0gIiAuLiB0ZXh0KQogICAgICAgIHJldHVybiBmYWxzZQogICAgZW5kCmVuZAoKLS0g5pi+56S65aSN5Yi25oiQ5Yqf6YCa55+lCmxvY2FsIGZ1bmN0aW9uIFNob3dDb3B5Tm90aWZpY2F0aW9uKHN1Y2Nlc3MsIGNvbnRlbnQpCiAgICBpZiBzdWNjZXNzIHRoZW4KICAgICAgICBSYXlmaWVsZDpOb3RpZnkoewogICAgICAgICAgICBUaXRsZSA9ICLlpI3liLbmiJDlip8iLAogICAgICAgICAgICBDb250ZW50ID0gIuW3suWkjeWItuWIsOWJqui0tOadvzogIiAuLiBjb250ZW50LAogICAgICAgICAgICBEdXJhdGlvbiA9IDMsCiAgICAgICAgICAgIEltYWdlID0gNDQ4MzM2MjQ1OAogICAgICAgIH0pCiAgICBlbHNlCiAgICAgICAgUmF5ZmllbGQ6Tm90aWZ5KHsKICAgICAgICAgICAgVGl0bGUgPSAi5aSN5Yi25aSx6LSlIiwKICAgICAgICAgICAgQ29udGVudCA9ICLor7fmiYvliqjlpI3liLbmjqfliLblj7DkuK3nmoTlhoXlrrkiLAogICAgICAgICAgICBEdXJhdGlvbiA9IDUsCiAgICAgICAgICAgIEltYWdlID0gNDQ4MzM2MjQ1OAogICAgICAgIH0pCiAgICBlbmQKZW5kCgotLSDliJvlu7rkuLvnqpflj6PlhoXlrrkKbG9jYWwgZnVuY3Rpb24gQ3JlYXRlTWFpbldpbmRvd0NvbnRlbnQoKQogICAgLS0g5YWs5ZGKIFRhYgogICAgbG9jYWwgVGFiMSA9IFdpbmRvdzpDcmVhdGVUYWIoIuWFrOWRiiIsIDc3MzM3Nzk2MTApCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIGdldERhdGUoKSByZXR1cm4gb3MuZGF0ZSgiJVktJW0tJWQgJUg6JU0iKSBlbmQKICAgIGxvY2FsIGZ1bmN0aW9uIGdldFBsYXllcigpCiAgICAgICAgbG9jYWwgcCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIFsi55So5oi35ZCNIl0gICA9IHAuTmFtZSwKICAgICAgICAgICAgWyLmmL7npLrlkI0iXSAgID0gcC5EaXNwbGF5TmFtZSwKICAgICAgICAgICAgWyLnlKjmiLdJRCJdICAgPSBwLlVzZXJJZCwKICAgICAgICAgICAgWyLms6jlhozlpKnmlbAiXSA9IHAuQWNjb3VudEFnZSwKICAgICAgICAgICAgWyLlvZPliY3muLjmiI8iXSA9IGdhbWU6R2V0U2VydmljZSgiTWFya2V0cGxhY2VTZXJ2aWNlIik6R2V0UHJvZHVjdEluZm8oZ2FtZS5QbGFjZUlkKS5OYW1lCiAgICAgICAgfQogICAgZW5kCiAgICAKICAgIFRhYjE6Q3JlYXRlU2VjdGlvbigi57O757uf5L+h5oGvIikKICAgIFRhYjE6Q3JlYXRlTGFiZWwoIvCfk4Ug5b2T5YmN5pe26Ze0OiAiIC4uIGdldERhdGUoKSkKICAgIAogICAgZm9yIGssIHYgaW4gcGFpcnMoZ2V0UGxheWVyKCkpIGRvCiAgICAgICAgVGFiMTpDcmVhdGVMYWJlbChrIC4uICLvvJogIiAuLiB0b3N0cmluZyh2KSkKICAgIGVuZAogICAgCiAgICBUYWIxOkNyZWF0ZUJ1dHRvbih7CiAgICAgICAgTmFtZSA9ICLkuIDplK7lpI3liLZRUeWPtyIsIAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKSAKICAgICAgICAgICAgbG9jYWwgc3VjY2VzcyA9IENvcHlUb0NsaXBib2FyZCgiOTEzMzQ4Mjg1IikKICAgICAgICAgICAgU2hvd0NvcHlOb3RpZmljYXRpb24oc3VjY2VzcywgIjkxMzM0ODI4NSIpCiAgICAgICAgZW5kCiAgICB9KQogICAgCiAgICAtLSDkurrnianlip/og70gVGFiCiAgICBsb2NhbCBUYWIyID0gV2luZG93OkNyZWF0ZVRhYigi5Lq654mp5Yqf6IO9IiwgNzczMzc3OTYxMCkKICAgIAogICAgLS0g5YW85a65IGV4ZWN1dG9yIOayoeaciSBtb3VzZTFwcmVzcyAvIG1vdXNlMXJlbGVhc2UKICAgIGxvY2FsIG1vdXNlMXByZXNzICA9IG1vdXNlMXByZXNzICBvciBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdmltID0gZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIikKICAgICAgICB2aW06U2VuZE1vdXNlQnV0dG9uRXZlbnQoMCwwLDAsdHJ1ZSxnYW1lLDEpCiAgICBlbmQKICAgIGxvY2FsIG1vdXNlMXJlbGVhc2UgPSBtb3VzZTFyZWxlYXNlIG9yIGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2aW0gPSBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKQogICAgICAgIHZpbTpTZW5kTW91c2VCdXR0b25FdmVudCgwLDAsMCxmYWxzZSxnYW1lLDEpCiAgICBlbmQKICAgIAogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC0tIOWPjOeLrOeriyBGT1bvvIjnmb3ot5/pmo8gKyDmqZnlm7rlrprvvInpg73lj4LkuI7nnoTlh4bliKTlrpogLSDlop7lvLrniYgKICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAtLSDpgJrnlKjlj4LmlbAKICAgIGxvY2FsIGFpbWJvdEVuYWJsZWQgICAgICA9IGZhbHNlCiAgICBsb2NhbCBhaW1ib3RTbW9vdGggICAgICAgPSAwLjM1CiAgICBsb2NhbCBhaW1ib3RCb25lICAgICAgICAgPSAiSGVhZCIKICAgIGxvY2FsIGFpbWJvdFByZWRpY3Rpb24gICA9IDAuMTIKICAgIGxvY2FsIGFpbWJvdERlbGF5ICAgICAgICA9IDAuMDgKICAgIGxvY2FsIGFpbWJvdENoZWNrVGVhbSAgICA9IGZhbHNlCiAgICBsb2NhbCBsYXN0RmlyZSA9IDAKICAgIGxvY2FsIGFpbWJvdENvbm4KICAgIGxvY2FsIGFpbWJvdE1vZGUgPSAiRGlzdGFuY2UiCiAgICBsb2NhbCB3YWxsQ2hlY2tFbmFibGVkID0gZmFsc2UKICAgIGxvY2FsIGFpbUxpbmVFbmFibGVkID0gZmFsc2UKICAgIGxvY2FsIGFpbUxpbmUgPSBEcmF3aW5nLm5ldygiTGluZSIpCiAgICAKICAgIC0tIOWIneWni+WMluiHqueehOe6v+adoQogICAgYWltTGluZS5WaXNpYmxlID0gZmFsc2UKICAgIGFpbUxpbmUuVGhpY2tuZXNzID0gMS41CiAgICBhaW1MaW5lLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMCwgMjU1LCAwKQogICAgYWltTGluZS5aSW5kZXggPSAxMQogICAgCiAgICAtLSDnvLrlpLHlj5jph4/kuIDmrKHmgKfooaXlhagKICAgIGxvY2FsIENhbWVyYSA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhCiAgICBsb2NhbCBVc2VySW5wdXRTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIikKICAgIGxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQogICAgbG9jYWwgTG9jYWxQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAKICAgIC0tIDEuIOi3n+maj+m8oOaghyBGT1YKICAgIGxvY2FsIG1vdXNlRk9WICAgICAgPSAxMjAKICAgIGxvY2FsIG1vdXNlRm92Q2lyY2xlID0gRHJhd2luZy5uZXcoIkNpcmNsZSIpCiAgICBtb3VzZUZvdkNpcmNsZS5OdW1TaWRlcyAgPSA2NAogICAgbW91c2VGb3ZDaXJjbGUuUmFkaXVzICAgID0gbW91c2VGT1YKICAgIG1vdXNlRm92Q2lyY2xlLlRoaWNrbmVzcyA9IDEuNQogICAgbW91c2VGb3ZDaXJjbGUuQ29sb3IgICAgID0gQ29sb3IzLmZyb21SR0IoMjU1LDI1NSwyNTUpCiAgICBtb3VzZUZvdkNpcmNsZS5GaWxsZWQgICAgPSBmYWxzZQogICAgbW91c2VGb3ZDaXJjbGUuVmlzaWJsZSAgID0gZmFsc2UKICAgIG1vdXNlRm92Q2lyY2xlLlpJbmRleCA9IDEwCiAgICAKICAgIC0tIDIuIOWbuuWumuS4reW/gyBGT1YKICAgIGxvY2FsIGZpeGVkRk9WICAgICAgPSA5MAogICAgbG9jYWwgZml4ZWRGb3ZDaXJjbGUgPSBEcmF3aW5nLm5ldygiQ2lyY2xlIikKICAgIGZpeGVkRm92Q2lyY2xlLk51bVNpZGVzICA9IDY0CiAgICBmaXhlZEZvdkNpcmNsZS5SYWRpdXMgICAgPSBmaXhlZEZPVgogICAgZml4ZWRGb3ZDaXJjbGUuVGhpY2tuZXNzID0gMS41CiAgICBmaXhlZEZvdkNpcmNsZS5Db2xvciAgICAgPSBDb2xvcjMuZnJvbVJHQigyNTUsMTY1LDApCiAgICBmaXhlZEZvdkNpcmNsZS5GaWxsZWQgICAgPSBmYWxzZQogICAgZml4ZWRGb3ZDaXJjbGUuVmlzaWJsZSAgID0gZmFsc2UKICAgIGZpeGVkRm92Q2lyY2xlLlpJbmRleCA9IDkKICAgIAogICAgLS0g5Zu65a6a5ZyG5Lit5b+D5LiA5qyh6K6+572uCiAgICBsb2NhbCBmdW5jdGlvbiBzZXRGaXhlZENlbnRlcigpCiAgICAgICAgbG9jYWwgY2VudGVyID0gVmVjdG9yMi5uZXcoQ2FtZXJhLlZpZXdwb3J0U2l6ZS5YLzIsIENhbWVyYS5WaWV3cG9ydFNpemUuWS8yKQogICAgICAgIGZpeGVkRm92Q2lyY2xlLlBvc2l0aW9uID0gY2VudGVyCiAgICAgICAgLS0g5Yid5aeL5YyW6Ieq556E57q/5p2h55qE6LW354K5CiAgICAgICAgYWltTGluZS5Gcm9tID0gY2VudGVyCiAgICBlbmQKICAgIENhbWVyYTpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlZpZXdwb3J0U2l6ZSIpOkNvbm5lY3Qoc2V0Rml4ZWRDZW50ZXIpCiAgICBzZXRGaXhlZENlbnRlcigpCiAgICAKICAgIC0tIOW3peWFt+WHveaVsAogICAgbG9jYWwgZnVuY3Rpb24gZ2V0QWltUG9zKGNoYXJhY3RlcikKICAgICAgICBpZiBub3QgY2hhcmFjdGVyIHRoZW4gcmV0dXJuIG5pbCBlbmQKICAgICAgICBsb2NhbCByb290ID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICBsb2NhbCBib25lID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKGFpbWJvdEJvbmUpIG9yIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpCiAgICAgICAgaWYgbm90IChyb290IGFuZCBib25lKSB0aGVuIHJldHVybiBuaWwgZW5kCiAgICAgICAgCiAgICAgICAgbG9jYWwgdmVsID0gcm9vdC5WZWxvY2l0eQogICAgICAgIHJldHVybiBib25lLlBvc2l0aW9uICsgdmVsICogYWltYm90UHJlZGljdGlvbgogICAgZW5kCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIGlzVmlzaWJsZShwb3MsIHRhcmdldENoYXJhY3RlcikKICAgICAgICBpZiBub3Qgd2FsbENoZWNrRW5hYmxlZCB0aGVuIHJldHVybiB0cnVlIGVuZAogICAgICAgIAogICAgICAgIGxvY2FsIG9yaWdpbiA9IENhbWVyYS5DRnJhbWUuUG9zaXRpb24KICAgICAgICBsb2NhbCBkaXJlY3Rpb24gPSAocG9zIC0gb3JpZ2luKS5Vbml0CiAgICAgICAgbG9jYWwgcmF5ID0gUmF5Lm5ldyhvcmlnaW4sIGRpcmVjdGlvbiAqIChvcmlnaW4gLSBwb3MpLk1hZ25pdHVkZSkKICAgICAgICAKICAgICAgICBsb2NhbCBpZ25vcmVMaXN0ID0ge0xvY2FsUGxheWVyLkNoYXJhY3RlciwgQ2FtZXJhfQogICAgICAgIGlmIHRhcmdldENoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIHRhYmxlLmluc2VydChpZ25vcmVMaXN0LCB0YXJnZXRDaGFyYWN0ZXIpCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgbG9jYWwgcGFydCwgcG9zaXRpb24gPSB3b3Jrc3BhY2U6RmluZFBhcnRPblJheVdpdGhJZ25vcmVMaXN0KHJheSwgaWdub3JlTGlzdCkKICAgICAgICByZXR1cm4gcGFydCA9PSBuaWwKICAgIGVuZAogICAgCiAgICBsb2NhbCBmdW5jdGlvbiBpbkFueUZPVih3b3JsZFBvcykKICAgICAgICBsb2NhbCBzY3JlZW5Qb3MgPSBDYW1lcmE6V29ybGRUb1ZpZXdwb3J0UG9pbnQod29ybGRQb3MpCiAgICAgICAgaWYgc2NyZWVuUG9zLlogPD0gMCB0aGVuIHJldHVybiBmYWxzZSBlbmQKICAgICAgICAKICAgICAgICBsb2NhbCBtb3VzZVBvcyA9IFVzZXJJbnB1dFNlcnZpY2U6R2V0TW91c2VMb2NhdGlvbigpCiAgICAgICAgbG9jYWwgY2VudGVyID0gVmVjdG9yMi5uZXcoQ2FtZXJhLlZpZXdwb3J0U2l6ZS5YLzIsIENhbWVyYS5WaWV3cG9ydFNpemUuWS8yKQogICAgICAgIAogICAgICAgIGlmIG1vdXNlRm92Q2lyY2xlLlZpc2libGUgdGhlbgogICAgICAgICAgICBpZiAoVmVjdG9yMi5uZXcoc2NyZWVuUG9zLlgsIHNjcmVlblBvcy5ZKSAtIG1vdXNlUG9zKS5NYWduaXR1ZGUgPD0gbW91c2VGT1YgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgaWYgZml4ZWRGb3ZDaXJjbGUuVmlzaWJsZSB0aGVuCiAgICAgICAgICAgIGlmIChWZWN0b3IyLm5ldyhzY3JlZW5Qb3MuWCwgc2NyZWVuUG9zLlkpIC0gY2VudGVyKS5NYWduaXR1ZGUgPD0gZml4ZWRGT1YgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKICAgIAogICAgbG9jYWwgZnVuY3Rpb24gZ2V0Q2xvc2VzdCgpCiAgICAgICAgbG9jYWwgY2xvc2VzdCwgbWluRGlzdCA9IG5pbCwgbWF0aC5odWdlCiAgICAgICAgbG9jYWwgY2VudGVyID0gVmVjdG9yMi5uZXcoQ2FtZXJhLlZpZXdwb3J0U2l6ZS5YLzIsIENhbWVyYS5WaWV3cG9ydFNpemUuWS8yKQogICAgICAgIAogICAgICAgIGZvciBfLCBwbHIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICBpZiBwbHIgPT0gTG9jYWxQbGF5ZXIgdGhlbiBjb250aW51ZSBlbmQKICAgICAgICAgICAgaWYgYWltYm90Q2hlY2tUZWFtIGFuZCBwbHIuVGVhbSBhbmQgcGxyLlRlYW0gPT0gTG9jYWxQbGF5ZXIuVGVhbSB0aGVuIGNvbnRpbnVlIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgY2hhciA9IHBsci5DaGFyYWN0ZXIKICAgICAgICAgICAgaWYgbm90IGNoYXIgdGhlbiBjb250aW51ZSBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsIGFpbVBvcyA9IGdldEFpbVBvcyhjaGFyKQogICAgICAgICAgICBpZiBub3QgYWltUG9zIHRoZW4gY29udGludWUgZW5kCiAgICAgICAgICAgIGlmIG5vdCBpbkFueUZPVihhaW1Qb3MpIHRoZW4gY29udGludWUgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCBzcCA9IENhbWVyYTpXb3JsZFRvVmlld3BvcnRQb2ludChhaW1Qb3MpCiAgICAgICAgICAgIGlmIHNwLlogPD0gMCB0aGVuIGNvbnRpbnVlIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgaWdub3JlTGlzdCA9IHtMb2NhbFBsYXllci5DaGFyYWN0ZXIsIENhbWVyYX0KICAgICAgICAgICAgaWYgbm90IGlzVmlzaWJsZShhaW1Qb3MsIGNoYXIpIHRoZW4gY29udGludWUgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCBkaXN0CiAgICAgICAgICAgIGlmIGFpbWJvdE1vZGUgPT0gIkRpc3RhbmNlIiB0aGVuCiAgICAgICAgICAgICAgICBkaXN0ID0gKGFpbVBvcyAtIENhbWVyYS5DRnJhbWUuUG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBkaXN0ID0gKFZlY3RvcjIubmV3KHNwLlgsIHNwLlkpIC0gY2VudGVyKS5NYWduaXR1ZGUKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBkaXN0IDwgbWluRGlzdCB0aGVuCiAgICAgICAgICAgICAgICBtaW5EaXN0LCBjbG9zZXN0ID0gZGlzdCwgcGxyCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIHJldHVybiBjbG9zZXN0CiAgICBlbmQKICAgIAogICAgLS0g5Li75b6q546v77yI5bim6Ziy556s55Sp77yJCiAgICBsb2NhbCBmdW5jdGlvbiBzdGFydEFpbWJvdCgpCiAgICAgICAgaWYgYWltYm90Q29ubiB0aGVuIHJldHVybiBlbmQKICAgICAgICAKICAgICAgICBhaW1ib3RDb25uID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgbm90IGFpbWJvdEVuYWJsZWQgdGhlbiAKICAgICAgICAgICAgICAgIGFpbUxpbmUuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICByZXR1cm4gCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbW91c2VGb3ZDaXJjbGUuUG9zaXRpb24gPSBVc2VySW5wdXRTZXJ2aWNlOkdldE1vdXNlTG9jYXRpb24oKQoKICAgICAgICAgICAgbG9jYWwgdGFyZ2V0ID0gZ2V0Q2xvc2VzdCgpCiAgICAgICAgICAgIGlmIG5vdCB0YXJnZXQgb3Igbm90IHRhcmdldC5DaGFyYWN0ZXIgdGhlbiAKICAgICAgICAgICAgICAgIGFpbUxpbmUuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICByZXR1cm4gCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgYWltUG9zID0gZ2V0QWltUG9zKHRhcmdldC5DaGFyYWN0ZXIpCiAgICAgICAgICAgIGlmIG5vdCBhaW1Qb3MgdGhlbiAKICAgICAgICAgICAgICAgIGFpbUxpbmUuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICByZXR1cm4gCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgaWYgYWltTGluZUVuYWJsZWQgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgc2NyZWVuUG9zID0gQ2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KGFpbVBvcykKICAgICAgICAgICAgICAgIGlmIHNjcmVlblBvcy5aID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgYWltTGluZS5Gcm9tID0gVmVjdG9yMi5uZXcoQ2FtZXJhLlZpZXdwb3J0U2l6ZS5YLzIsIENhbWVyYS5WaWV3cG9ydFNpemUuWS8yKQogICAgICAgICAgICAgICAgICAgIGFpbUxpbmUuVG8gPSBWZWN0b3IyLm5ldyhzY3JlZW5Qb3MuWCwgc2NyZWVuUG9zLlkpCiAgICAgICAgICAgICAgICAgICAgYWltTGluZS5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGFpbUxpbmUuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgYWltTGluZS5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCBkZWx0YSA9IGFpbVBvcyAtIENhbWVyYS5DRnJhbWUuUG9zaXRpb24KICAgICAgICAgICAgaWYgZGVsdGEuTWFnbml0dWRlIDwgMC4wMSB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsIHRhcmdldENGID0gQ0ZyYW1lLm5ldyhDYW1lcmEuQ0ZyYW1lLlBvc2l0aW9uLCBDYW1lcmEuQ0ZyYW1lLlBvc2l0aW9uICsgZGVsdGEpCiAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRMb29rID0gQ2FtZXJhLkNGcmFtZS5Mb29rVmVjdG9yCiAgICAgICAgICAgIGxvY2FsIHRhcmdldExvb2sgPSB0YXJnZXRDRi5Mb29rVmVjdG9yCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCBkb3QgPSBjdXJyZW50TG9vazpEb3QodGFyZ2V0TG9vaykKICAgICAgICAgICAgbG9jYWwgYW5nbGUgPSBtYXRoLmFjb3MobWF0aC5jbGFtcChkb3QsIC0xLCAxKSkKICAgICAgICAgICAgbG9jYWwgbWF4QW5nbGUgPSBtYXRoLnJhZCg5MCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGFuZ2xlIDw9IG1heEFuZ2xlIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHNtb290aEZhY3RvciA9IG1hdGguY2xhbXAoYWltYm90U21vb3RoLCAwLjAxLCAwLjk5KQogICAgICAgICAgICAgICAgbG9jYWwgbmV3TG9vayA9IGN1cnJlbnRMb29rOkxlcnAodGFyZ2V0TG9vaywgMSAtIHNtb290aEZhY3RvcikKICAgICAgICAgICAgICAgIENhbWVyYS5DRnJhbWUgPSBDRnJhbWUubmV3KENhbWVyYS5DRnJhbWUuUG9zaXRpb24sIENhbWVyYS5DRnJhbWUuUG9zaXRpb24gKyBuZXdMb29rKQogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIGlmIHRpY2soKSAtIGxhc3RGaXJlID4gYWltYm90RGVsYXkgdGhlbgogICAgICAgICAgICAgICAgbW91c2UxcHJlc3MoKQogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMDUpCiAgICAgICAgICAgICAgICBtb3VzZTFyZWxlYXNlKCkKICAgICAgICAgICAgICAgIGxhc3RGaXJlID0gdGljaygpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZAogICAgCiAgICBsb2NhbCBmdW5jdGlvbiBzdG9wQWltYm90KCkKICAgICAgICBpZiBhaW1ib3RDb25uIHRoZW4gCiAgICAgICAgICAgIGFpbWJvdENvbm46RGlzY29ubmVjdCgpIAogICAgICAgICAgICBhaW1ib3RDb25uID0gbmlsIAogICAgICAgIGVuZAogICAgICAgIG1vdXNlRm92Q2lyY2xlLlZpc2libGUgPSBmYWxzZQogICAgICAgIGZpeGVkRm92Q2lyY2xlLlZpc2libGUgPSBmYWxzZQogICAgICAgIGFpbUxpbmUuVmlzaWJsZSA9IGZhbHNlCiAgICBlbmQKICAgIAogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC0tIEFJLUFpbWJvdCDni6znq4vmoIfnrb7pobUKICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBsb2NhbCBUYWIzID0gV2luZG93OkNyZWF0ZVRhYigiQUktQWltYm90IiwgNzczMzk2MTc0OCkgLS0g5L2/55So5LiN5ZCM55qE5Zu+5qCHCiAgICAKICAgIFRhYjM6Q3JlYXRlU2VjdGlvbigiQUktQWltYm90IikKICAgIFRhYjM6Q3JlYXRlVG9nZ2xlKHsKICAgICAgICBOYW1lID0gIuWQr+eUqCBBaW1ib3QiLAogICAgICAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odikKICAgICAgICAgICAgYWltYm90RW5hYmxlZCA9IHYKICAgICAgICAgICAgaWYgdiB0aGVuIAogICAgICAgICAgICAgICAgc3RhcnRBaW1ib3QoKSAKICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgIHN0b3BBaW1ib3QoKSAKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICB9KQogICAgCiAgICBUYWIzOkNyZWF0ZVRvZ2dsZSh7CiAgICAgICAgTmFtZSA9ICLku4XnnoTlh4bmlYzkuroiLAogICAgICAgIEN1cnJlbnRWYWx1ZSA9IGFpbWJvdENoZWNrVGVhbSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYpIGFpbWJvdENoZWNrVGVhbSA9IHYgZW5kCiAgICB9KQogICAgCiAgICBUYWIzOkNyZWF0ZVRvZ2dsZSh7CiAgICAgICAgTmFtZSA9ICLlopnkvZPmo4DmtYsiLAogICAgICAgIEN1cnJlbnRWYWx1ZSA9IHdhbGxDaGVja0VuYWJsZWQsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2KSB3YWxsQ2hlY2tFbmFibGVkID0gdiBlbmQKICAgIH0pCiAgICAKICAgIFRhYjM6Q3JlYXRlVG9nZ2xlKHsKICAgICAgICBOYW1lID0gIuaYvuekuuiHqueehOe6v+adoSIsCiAgICAgICAgQ3VycmVudFZhbHVlID0gYWltTGluZUVuYWJsZWQsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2KSBhaW1MaW5lRW5hYmxlZCA9IHYgZW5kCiAgICB9KQogICAgCiAgICBUYWIzOkNyZWF0ZURyb3Bkb3duKHsKICAgICAgICBOYW1lID0gIueehOWHhuaWueW8jyIsCiAgICAgICAgT3B0aW9ucyA9IHsiRGlzdGFuY2UiLCAiQ3Jvc3NoYWlyIn0sCiAgICAgICAgQ3VycmVudE9wdGlvbiA9IGFpbWJvdE1vZGUsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2KSBhaW1ib3RNb2RlID0gdiBlbmQKICAgIH0pCiAgICAKICAgIFRhYjM6Q3JlYXRlU2VjdGlvbigi6Lef6ZqP6byg5qCHIEZPViIpCiAgICBUYWIzOkNyZWF0ZVRvZ2dsZSh7IAogICAgICAgIE5hbWUgPSAi5pi+56S66Lef6ZqPRk9WIiwgCiAgICAgICAgQ3VycmVudFZhbHVlID0gZmFsc2UsIAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odikgbW91c2VGb3ZDaXJjbGUuVmlzaWJsZSA9IHYgZW5kIAogICAgfSkKICAgIAogICAgVGFiMzpDcmVhdGVTbGlkZXIoewogICAgICAgIE5hbWUgPSAi5Y2K5b6E77yI5ruR5p2h77yJIiwKICAgICAgICBSYW5nZSA9IHswLCA1MDB9LAogICAgICAgIEluY3JlbWVudCA9IDUsCiAgICAgICAgU3VmZml4ID0gInB4IiwKICAgICAgICBDdXJyZW50VmFsdWUgPSBtb3VzZUZPViwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYpIAogICAgICAgICAgICBtb3VzZUZPViA9IHYKICAgICAgICAgICAgbW91c2VGb3ZDaXJjbGUuUmFkaXVzID0gdiAKICAgICAgICBlbmQKICAgIH0pCiAgICAKICAgIFRhYjM6Q3JlYXRlSW5wdXQoewogICAgICAgIE5hbWUgPSAi5Y2K5b6E77yI6L6T5YWl77yJIiwKICAgICAgICBQbGFjZWhvbGRlclRleHQgPSB0b3N0cmluZyhtb3VzZUZPViksCiAgICAgICAgUmVtb3ZlVGV4dEFmdGVyRm9jdXNMb3N0ID0gZmFsc2UsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih0eHQpIAogICAgICAgICAgICBsb2NhbCBuID0gdG9udW1iZXIodHh0KSAKICAgICAgICAgICAgaWYgbiB0aGVuIAogICAgICAgICAgICAgICAgbW91c2VGT1YgPSBuCiAgICAgICAgICAgICAgICBtb3VzZUZvdkNpcmNsZS5SYWRpdXMgPSBuCiAgICAgICAgICAgIGVuZCAKICAgICAgICBlbmQKICAgIH0pCiAgICAKICAgIFRhYjM6Q3JlYXRlU2VjdGlvbigi5Zu65a6a5Lit5b+DIEZPViIpCiAgICBUYWIzOkNyZWF0ZVRvZ2dsZSh7IAogICAgICAgIE5hbWUgPSAi5pi+56S65Zu65a6aRk9WIiwgCiAgICAgICAgQ3VycmVudFZhbHVlID0gZmFsc2UsIAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odikgZml4ZWRGb3ZDaXJjbGUuVmlzaWJsZSA9IHYgZW5kIAogICAgfSkKICAgIAogICAgVGFiMzpDcmVhdGVTbGlkZXIoewogICAgICAgIE5hbWUgPSAi5Y2K5b6E77yI5ruR5p2h77yJIiwKICAgICAgICBSYW5nZSA9IHswLCA1MDB9LAogICAgICAgIEluY3JlbWVudCA9IDUsCiAgICAgICAgU3VmZml4ID0gInB4IiwKICAgICAgICBDdXJyZW50VmFsdWUgPSBmaXhlZEZPViwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYpIAogICAgICAgICAgICBmaXhlZEZPViA9IHYKICAgICAgICAgICAgZml4ZWRGb3ZDaXJjbGUuUmFkaXVzID0gdiAKICAgICAgICBlbmQKICAgIH0pCiAgICAKICAgIFRhYjM6Q3JlYXRlSW5wdXQoewogICAgICAgIE5hbWUgPSAi5Y2K5b6E77yI6L6T5YWl77yJIiwKICAgICAgICBQbGFjZWhvbGRlclRleHQgPSB0b3N0cmluZyhmaXhlZEZPViksCiAgICAgICAgUmVtb3ZlVGV4dEFmdGVyRm9jdXNMb3N0ID0gZmFsc2UsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih0eHQpIAogICAgICAgICAgICBsb2NhbCBuID0gdG9udW1iZXIodHh0KSAKICAgICAgICAgICAgaWYgbiB0aGVuIAogICAgICAgICAgICAgICAgZml4ZWRGT1YgPSBuCiAgICAgICAgICAgICAgICBmaXhlZEZvdkNpcmNsZS5SYWRpdXMgPSBuCiAgICAgICAgICAgIGVuZCAKICAgICAgICBlbmQKICAgIH0pCiAgICAKICAgIFRhYjM6Q3JlYXRlU2VjdGlvbigi6YCa55So5Y+C5pWwIikKICAgIFRhYjM6Q3JlYXRlU2xpZGVyKHsKICAgICAgICBOYW1lID0gIuW5s+a7keezu+aVsO+8iOa7keadoe+8iSIsCiAgICAgICAgUmFuZ2UgPSB7MCwgMX0sCiAgICAgICAgSW5jcmVtZW50ID0gMC4wMSwKICAgICAgICBTdWZmaXggPSAiIiwKICAgICAgICBDdXJyZW50VmFsdWUgPSBhaW1ib3RTbW9vdGgsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2KSBhaW1ib3RTbW9vdGggPSB2IGVuZAogICAgfSkKICAgIAogICAgVGFiMzpDcmVhdGVJbnB1dCh7CiAgICAgICAgTmFtZSA9ICLlubPmu5Hns7vmlbDvvIjovpPlhaXvvIkiLAogICAgICAgIFBsYWNlaG9sZGVyVGV4dCA9IHRvc3RyaW5nKGFpbWJvdFNtb290aCksCiAgICAgICAgUmVtb3ZlVGV4dEFmdGVyRm9jdXNMb3N0ID0gZmFsc2UsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih0eHQpIAogICAgICAgICAgICBsb2NhbCBuID0gdG9udW1iZXIodHh0KSAKICAgICAgICAgICAgaWYgbiB0aGVuIAogICAgICAgICAgICAgICAgYWltYm90U21vb3RoID0gbgogICAgICAgICAgICBlbmQgCiAgICAgICAgZW5kCiAgICB9KQogICAgCiAgICBUYWIzOkNyZWF0ZVNsaWRlcih7CiAgICAgICAgTmFtZSA9ICLpooTmtYsgKOenkinvvIjmu5HmnaHvvIkiLAogICAgICAgIFJhbmdlID0gezAsIDF9LAogICAgICAgIEluY3JlbWVudCA9IDAuMDEsCiAgICAgICAgU3VmZml4ID0gInMiLAogICAgICAgIEN1cnJlbnRWYWx1ZSA9IGFpbWJvdFByZWRpY3Rpb24sCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2KSBhaW1ib3RQcmVkaWN0aW9uID0gdiBlbmQKICAgIH0pCiAgICAKICAgIFRhYjM6Q3JlYXRlSW5wdXQoewogICAgICAgIE5hbWUgPSAi6aKE5rWLICjnp5Ip77yI6L6T5YWl77yJIiwKICAgICAgICBQbGFjZWhvbGRlclRleHQgPSB0b3N0cmluZyhhaW1ib3RQcmVkaWN0aW9uKSwKICAgICAgICBSZW1vdmVUZXh0QWZ0ZXJGb2N1c0xvc3QgPSBmYWxzZSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHR4dCkgCiAgICAgICAgICAgIGxvY2FsIG4gPSB0b251bWJlcih0eHQpIAogICAgICAgICAgICBpZiBuIHRoZW4gCiAgICAgICAgICAgICAgICBhaW1ib3RQcmVkaWN0aW9uID0gbgogICAgICAgICAgICBlbmQgCiAgICAgICAgZW5kCiAgICB9KQogICAgCiAgICBUYWIzOkNyZWF0ZVNsaWRlcih7CiAgICAgICAgTmFtZSA9ICLlvIDngavlu7bov58gKOenkinvvIjmu5HmnaHvvIkiLAogICAgICAgIFJhbmdlID0gezAsIDF9LAogICAgICAgIEluY3JlbWVudCA9IDAuMDEsCiAgICAgICAgU3VmZml4ID0gInMiLAogICAgICAgIEN1cnJlbnRWYWx1ZSA9IGFpbWJvdERlbGF5LAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odikgYWltYm90RGVsYXkgPSB2IGVuZAogICAgfSkKICAgIAogICAgVGFiMzpDcmVhdGVJbnB1dCh7CiAgICAgICAgTmFtZSA9ICLlvIDngavlu7bov58gKOenkinvvIjovpPlhaXvvIkiLAogICAgICAgIFBsYWNlaG9sZGVyVGV4dCA9IHRvc3RyaW5nKGFpbWJvdERlbGF5KSwKICAgICAgICBSZW1vdmVUZXh0QWZ0ZXJGb2N1c0xvc3QgPSBmYWxzZSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHR4dCkgCiAgICAgICAgICAgIGxvY2FsIG4gPSB0b251bWJlcih0eHQpIAogICAgICAgICAgICBpZiBuIHRoZW4gCiAgICAgICAgICAgICAgICBhaW1ib3REZWxheSA9IG4KICAgICAgICAgICAgZW5kIAogICAgICAgIGVuZAogICAgfSkKICAgIAogICAgVGFiMzpDcmVhdGVEcm9wZG93bih7CiAgICAgICAgTmFtZSA9ICLnnoTlh4bpqqjpqrwiLAogICAgICAgIE9wdGlvbnMgPSB7IkhlYWQiLCJOZWNrIiwiVXBwZXJUb3JzbyIsIkh1bWFub2lkUm9vdFBhcnQifSwKICAgICAgICBDdXJyZW50T3B0aW9uID0gYWltYm90Qm9uZSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYpIGFpbWJvdEJvbmUgPSB2IGVuZAogICAgfSkKICAgIAogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC0tIOWIoOmZpOmYtOW9se+8iOWFqOWxgOW8gOWFs++8iQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIFRhYjI6Q3JlYXRlVG9nZ2xlKHsKICAgICAgICBOYW1lID0gIuWIoOmZpOmYtOW9sSIsCiAgICAgICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2KQogICAgICAgICAgICBnYW1lLkxpZ2h0aW5nLkdsb2JhbFNoYWRvd3MgPSBub3QgdgogICAgICAgICAgICBmb3IgXywgbCBpbiBpcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBsOklzQSgiQmFzZVBhcnQiKSBvciBsOklzQSgiTWVzaFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbC5DYXN0U2hhZG93ID0gbm90IHYKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgUmF5ZmllbGQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgIFRpdGxlID0gIuaPkOekuiIsCiAgICAgICAgICAgICAgICBDb250ZW50ID0gdiBhbmQgIumYtOW9seW3suWIoOmZpCIgb3IgIumYtOW9seW3suaBouWkjSIsCiAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDIsCiAgICAgICAgICAgICAgICBJbWFnZSA9IDQ0ODMzNjI0NTgKICAgICAgICAgICAgfSkKICAgICAgICBlbmQKICAgIH0pCgogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC0tIOS8mOWMluWQjueahOmjnuihjOWKn+iDvQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGxvY2FsIGZseWluZyA9IGZhbHNlCiAgICBsb2NhbCBmbHlTcGVlZCA9IDUwCiAgICBsb2NhbCBiZywgYnYKICAgIGxvY2FsIGN0cmwgPSB7ZiA9IDAsIGIgPSAwLCBsID0gMCwgciA9IDAsIHUgPSAwLCBkID0gMH0KICAgIGxvY2FsIGZseUNvbm5lY3Rpb24KICAgIAogICAgbG9jYWwgZnVuY3Rpb24gZmx5TG9vcCgpCiAgICAgICAgd2hpbGUgZmx5aW5nIGFuZCBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6V2FpdCgpIGRvCiAgICAgICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgaWYgbm90IGNoYXJhY3RlciB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgdG9yc28gPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBvciAKICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlRvcnNvIikgb3IgCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJVcHBlclRvcnNvIikKICAgICAgICAgICAgaWYgbm90IHRvcnNvIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCBtb3ZlRGlyZWN0aW9uID0gVmVjdG9yMy5uZXcoY3RybC5yIC0gY3RybC5sLCBjdHJsLnUgLSBjdHJsLmQsIGN0cmwuYiAtIGN0cmwuZikKICAgICAgICAgICAgaWYgbW92ZURpcmVjdGlvbi5NYWduaXR1ZGUgPiAwIHRoZW4KICAgICAgICAgICAgICAgIG1vdmVEaXJlY3Rpb24gPSBtb3ZlRGlyZWN0aW9uLlVuaXQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCBjYW1lcmEgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQogICAgICAgICAgICBsb2NhbCBjYW1lcmFDRnJhbWUgPSBjYW1lcmEuQ0ZyYW1lCiAgICAgICAgICAgIGxvY2FsIGNhbWVyYUxvb2tWZWN0b3IgPSBjYW1lcmFDRnJhbWUuTG9va1ZlY3RvcgogICAgICAgICAgICBsb2NhbCBjYW1lcmFSaWdodFZlY3RvciA9IGNhbWVyYUNGcmFtZS5SaWdodFZlY3RvcgogICAgICAgICAgICBsb2NhbCBjYW1lcmFVcFZlY3RvciA9IGNhbWVyYUNGcmFtZS5VcFZlY3RvcgogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgdmVsb2NpdHkgPSAoY2FtZXJhTG9va1ZlY3RvciAqIG1vdmVEaXJlY3Rpb24uWiAqIGZseVNwZWVkKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2FtZXJhUmlnaHRWZWN0b3IgKiBtb3ZlRGlyZWN0aW9uLlggKiBmbHlTcGVlZCkgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNhbWVyYVVwVmVjdG9yICogbW92ZURpcmVjdGlvbi5ZICogZmx5U3BlZWQpCiAgICAgICAgICAgIAogICAgICAgICAgICBidi5WZWxvY2l0eSA9IHZlbG9jaXR5CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBtb3ZlRGlyZWN0aW9uLk1hZ25pdHVkZSA+IDAgdGhlbgogICAgICAgICAgICAgICAgYmcuQ0ZyYW1lID0gY2FtZXJhQ0ZyYW1lICogQ0ZyYW1lLkFuZ2xlcygKICAgICAgICAgICAgICAgICAgICAtbWF0aC5yYWQobW92ZURpcmVjdGlvbi5aICogMTUpLAogICAgICAgICAgICAgICAgICAgIG1hdGgucmFkKG1vdmVEaXJlY3Rpb24uWCAqIDE1KSwKICAgICAgICAgICAgICAgICAgICAwCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIHN0YXJ0Rmx5aW5nKCkKICAgICAgICBpZiBmbHlpbmcgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgCiAgICAgICAgbG9jYWwgY2hhcmFjdGVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgIGlmIG5vdCBjaGFyYWN0ZXIgdGhlbiAKICAgICAgICAgICAgUmF5ZmllbGQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgIFRpdGxlID0gIumjnuihjOmUmeivryIsCiAgICAgICAgICAgICAgICBDb250ZW50ID0gIuaJvuS4jeWIsOinkuiJsiIsCiAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDMsCiAgICAgICAgICAgICAgICBJbWFnZSA9IDQ0ODMzNjI0NTgKICAgICAgICAgICAgfSkKICAgICAgICAgICAgcmV0dXJuIAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGxvY2FsIGh1bWFub2lkID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgICAgIGlmIG5vdCBodW1hbm9pZCB0aGVuIAogICAgICAgICAgICBSYXlmaWVsZDpOb3RpZnkoewogICAgICAgICAgICAgICAgVGl0bGUgPSAi6aOe6KGM6ZSZ6K+vIiwKICAgICAgICAgICAgICAgIENvbnRlbnQgPSAi5om+5LiN5YiwSHVtYW5vaWQiLAogICAgICAgICAgICAgICAgRHVyYXRpb24gPSAzLAogICAgICAgICAgICAgICAgSW1hZ2UgPSA0NDgzMzYyNDU4CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHJldHVybiAKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBmbHlpbmcgPSB0cnVlCiAgICAgICAgCiAgICAgICAgbG9jYWwgdG9yc28gPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBvciAKICAgICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVG9yc28iKSBvciAKICAgICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVXBwZXJUb3JzbyIpCiAgICAgICAgaWYgbm90IHRvcnNvIHRoZW4gCiAgICAgICAgICAgIGZseWluZyA9IGZhbHNlCiAgICAgICAgICAgIFJheWZpZWxkOk5vdGlmeSh7CiAgICAgICAgICAgICAgICBUaXRsZSA9ICLpo57ooYzplJnor68iLAogICAgICAgICAgICAgICAgQ29udGVudCA9ICLmib7kuI3liLDouqvkvZPpg6jkvY0iLAogICAgICAgICAgICAgICAgRHVyYXRpb24gPSAzLAogICAgICAgICAgICAgICAgSW1hZ2UgPSA0NDgzMzYyNDU4CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHJldHVybiAKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBiZyA9IEluc3RhbmNlLm5ldygiQm9keUd5cm8iLCB0b3JzbykKICAgICAgICBiZy5QID0gOWU0CiAgICAgICAgYmcubWF4VG9ycXVlID0gVmVjdG9yMy5uZXcoOWU5LCA5ZTksIDllOSkKICAgICAgICBiZy5jZnJhbWUgPSB0b3Jzby5DRnJhbWUKICAgICAgICAKICAgICAgICBidiA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5IiwgdG9yc28pCiAgICAgICAgYnYuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLCAwLjEsIDApCiAgICAgICAgYnYuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldyg5ZTksIDllOSwgOWU5KQogICAgICAgIAogICAgICAgIGh1bWFub2lkLlBsYXRmb3JtU3RhbmQgPSB0cnVlCiAgICAgICAgCiAgICAgICAgUmF5ZmllbGQ6Tm90aWZ5KHsKICAgICAgICAgICAgVGl0bGUgPSAi6aOe6KGM5qih5byPIiwKICAgICAgICAgICAgQ29udGVudCA9ICLpo57ooYzlt7LlkK/nlKggKOmAn+W6pjogIiAuLiBmbHlTcGVlZCAuLiAiKSIsCiAgICAgICAgICAgIER1cmF0aW9uID0gMywKICAgICAgICAgICAgSW1hZ2UgPSA0NDgzMzYyNDU4CiAgICAgICAgfSkKICAgICAgICAKICAgICAgICBmbHlDb25uZWN0aW9uID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OkNvbm5lY3QoZmx5TG9vcCkKICAgIGVuZAogICAgCiAgICBsb2NhbCBmdW5jdGlvbiBzdG9wRmx5aW5nKCkKICAgICAgICBpZiBub3QgZmx5aW5nIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIGZseWluZyA9IGZhbHNlCiAgICAgICAgCiAgICAgICAgaWYgYmcgdGhlbiBiZzpEZXN0cm95KCkgZW5kCiAgICAgICAgaWYgYnYgdGhlbiBidjpEZXN0cm95KCkgZW5kCiAgICAgICAgaWYgZmx5Q29ubmVjdGlvbiB0aGVuIGZseUNvbm5lY3Rpb246RGlzY29ubmVjdCgpIGVuZAogICAgICAgIAogICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICBpZiBjaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICBsb2NhbCBodW1hbm9pZCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICAgICAgaWYgaHVtYW5vaWQgdGhlbgogICAgICAgICAgICAgICAgaHVtYW5vaWQuUGxhdGZvcm1TdGFuZCA9IGZhbHNlCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgYW5pbWF0ZSA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0ZSIpCiAgICAgICAgICAgIGlmIGFuaW1hdGUgdGhlbgogICAgICAgICAgICAgICAgYW5pbWF0ZS5EaXNhYmxlZCA9IGZhbHNlCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGN0cmwgPSB7ZiA9IDAsIGIgPSAwLCBsID0gMCwgciA9IDAsIHUgPSAwLCBkID0gMH0KICAgICAgICAKICAgICAgICBSYXlmaWVsZDpOb3RpZnkoewogICAgICAgICAgICBUaXRsZSA9ICLpo57ooYzmqKHlvI8iLAogICAgICAgICAgICBDb250ZW50ID0gIumjnuihjOW3suemgeeUqCIsCiAgICAgICAgICAgIER1cmF0aW9uID0gMywKICAgICAgICAgICAgSW1hZ2UgPSA0NDgzMzYyNDU4CiAgICAgICAgfSkKICAgIGVuZAogICAgCiAgICBsb2NhbCBpbnB1dEJlZ2FuQ29ubiwgaW5wdXRFbmRlZENvbm4KICAgIAogICAgbG9jYWwgZnVuY3Rpb24gc2V0dXBJbnB1dCgpCiAgICAgICAgaWYgaW5wdXRCZWdhbkNvbm4gdGhlbiBpbnB1dEJlZ2FuQ29ubjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgaWYgaW5wdXRFbmRlZENvbm4gdGhlbiBpbnB1dEVuZGVkQ29ubjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgCiAgICAgICAgaW5wdXRCZWdhbkNvbm4gPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKS5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgICAgIGlmIG5vdCBmbHlpbmcgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5XIHRoZW4KICAgICAgICAgICAgICAgIGN0cmwuZiA9IDEKICAgICAgICAgICAgZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlMgdGhlbgogICAgICAgICAgICAgICAgY3RybC5iID0gMQogICAgICAgICAgICBlbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuQSB0aGVuCiAgICAgICAgICAgICAgICBjdHJsLmwgPSAxCiAgICAgICAgICAgIGVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5EIHRoZW4KICAgICAgICAgICAgICAgIGN0cmwuciA9IDEKICAgICAgICAgICAgZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlNwYWNlIHRoZW4KICAgICAgICAgICAgICAgIGN0cmwudSA9IDEKICAgICAgICAgICAgZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkxlZnRDb250cm9sIG9yIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkJ1dHRvbkwzIHRoZW4KICAgICAgICAgICAgICAgIGN0cmwuZCA9IDEKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgICAgIAogICAgICAgIGlucHV0RW5kZWRDb25uID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIikuSW5wdXRFbmRlZDpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQogICAgICAgICAgICBpZiBub3QgZmx5aW5nIHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuVyB0aGVuCiAgICAgICAgICAgICAgICBjdHJsLmYgPSAwCiAgICAgICAgICAgIGVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5TIHRoZW4KICAgICAgICAgICAgICAgIGN0cmwuYiA9IDAKICAgICAgICAgICAgZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkEgdGhlbgogICAgICAgICAgICAgICAgY3RybC5sID0gMAogICAgICAgICAgICBlbHNlaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuRCB0aGVuCiAgICAgICAgICAgICAgICBjdHJsLnIgPSAwCiAgICAgICAgICAgIGVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5TcGFjZSB0aGVuCiAgICAgICAgICAgICAgICBjdHJsLnUgPSAwCiAgICAgICAgICAgIGVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5MZWZ0Q29udHJvbCBvciBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5CdXR0b25MMyB0aGVuCiAgICAgICAgICAgICAgICBjdHJsLmQgPSAwCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZAogICAgCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgc3RvcEZseWluZygpCiAgICBlbmQpCiAgICAKICAgIFRhYjI6Q3JlYXRlU2VjdGlvbigi6aOe6KGM5Yqf6IO9IikKICAgIAogICAgVGFiMjpDcmVhdGVUb2dnbGUoewogICAgICAgIE5hbWUgPSAi5ZCv55So6aOe6KGMIiwKICAgICAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYpCiAgICAgICAgICAgIGlmIHYgdGhlbgogICAgICAgICAgICAgICAgc3RhcnRGbHlpbmcoKQogICAgICAgICAgICAgICAgc2V0dXBJbnB1dCgpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHN0b3BGbHlpbmcoKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIH0pCiAgICAKICAgIFRhYjI6Q3JlYXRlU2xpZGVyKHsKICAgICAgICBOYW1lID0gIumjnuihjOmAn+W6piIsCiAgICAgICAgUmFuZ2UgPSB7MTAsIDIwMH0sCiAgICAgICAgSW5jcmVtZW50ID0gNSwKICAgICAgICBTdWZmaXggPSAi5Y2V5L2NIiwKICAgICAgICBDdXJyZW50VmFsdWUgPSBmbHlTcGVlZCwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlKQogICAgICAgICAgICBmbHlTcGVlZCA9IHZhbHVlCiAgICAgICAgICAgIGlmIGZseWluZyB0aGVuCiAgICAgICAgICAgICAgICBSYXlmaWVsZDpOb3RpZnkoewogICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIumjnuihjOaooeW8jyIsCiAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9ICLpo57ooYzpgJ/luqbmm7TmlrDkuLo6ICIgLi4gZmx5U3BlZWQsCiAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAyLAogICAgICAgICAgICAgICAgICAgIEltYWdlID0gNDQ4MzM2MjQ1OAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICB9KQogICAgCiAgICBUYWIyOkNyZWF0ZUxhYmVsKCLmjqfliLbmlrnlvI86IikKICAgIFRhYjI6Q3JlYXRlTGFiZWwoIlcvQS9TL0QgLSDliY3lkI7lt6blj7Pnp7vliqgiKQogICAgVGFiMjpDcmVhdGVMYWJlbCgi56m65qC86ZSuIC0g5ZCR5LiK6aOe6KGMIikKICAgIFRhYjI6Q3JlYXRlTGFiZWwoIkN0cmzplK4gLSDlkJHkuIvpo57ooYwiKQogICAgCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLS0g5aKe5by654mI546p5a62IEVTUO+8iOWQq+mYn+S8jeajgOa1i+OAgei3neemu+OAgeihgOadoeWSjOe6v+adoee7mOWItu+8iS0g5Y2H57qn5Li654us56uL5byA5YWz6ZSuCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgbG9jYWwgZXNwU2V0dGluZ3MgPSB7CiAgICAgICAgZW5hYmxlZCA9IGZhbHNlLAogICAgICAgIHNob3dCb3ggPSB0cnVlLAogICAgICAgIHNob3dOYW1lID0gdHJ1ZSwKICAgICAgICBzaG93RGlzdGFuY2UgPSB0cnVlLAogICAgICAgIHNob3dIZWFsdGhCYXIgPSB0cnVlLAogICAgICAgIHNob3dIZWFsdGhUZXh0ID0gdHJ1ZSwKICAgICAgICBzaG93VHJhY2VyID0gdHJ1ZSwKICAgICAgICB0cmFjZXJQb3NpdGlvbiA9ICJCb3R0b20iLAogICAgICAgIHNob3dFbmVteU9ubHkgPSBmYWxzZQogICAgfQogICAgCiAgICBsb2NhbCBlc3BDYWNoZSA9IHt9CgogICAgbG9jYWwgZnVuY3Rpb24gZ2V0VGVhbUNvbG9yKHBscikKICAgICAgICBpZiBwbHIuVGVhbSBhbmQgTG9jYWxQbGF5ZXIuVGVhbSBhbmQgcGxyLlRlYW0gPT0gTG9jYWxQbGF5ZXIuVGVhbSB0aGVuCiAgICAgICAgICAgIHJldHVybiBDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDApCiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1cm4gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKQogICAgICAgIGVuZAogICAgZW5kCgogICAgbG9jYWwgZnVuY3Rpb24gaXNUZWFtbWF0ZShwbHIpCiAgICAgICAgaWYgcGxyLlRlYW0gYW5kIExvY2FsUGxheWVyLlRlYW0gYW5kIHBsci5UZWFtID09IExvY2FsUGxheWVyLlRlYW0gdGhlbgogICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgIGVuZAogICAgICAgIHJldHVybiBmYWxzZQogICAgZW5kCgogICAgbG9jYWwgZnVuY3Rpb24gY3JlYXRlRVNQT2JqZWN0KHBscikKICAgICAgICBsb2NhbCBlc3AgPSB7CiAgICAgICAgICAgIEJveCA9IERyYXdpbmcubmV3KCJRdWFkIiksCiAgICAgICAgICAgIE5hbWUgPSBEcmF3aW5nLm5ldygiVGV4dCIpLAogICAgICAgICAgICBEaXN0YW5jZSA9IERyYXdpbmcubmV3KCJUZXh0IiksCiAgICAgICAgICAgIEhlYWx0aEJhciA9IERyYXdpbmcubmV3KCJRdWFkIiksCiAgICAgICAgICAgIEhlYWx0aFRleHQgPSBEcmF3aW5nLm5ldygiVGV4dCIpLAogICAgICAgICAgICBUcmFjZXIgPSBEcmF3aW5nLm5ldygiTGluZSIpCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGVzcC5Cb3guVGhpY2tuZXNzID0gMS41CiAgICAgICAgZXNwLkJveC5GaWxsZWQgPSBmYWxzZQogICAgICAgIGVzcC5Cb3guWkluZGV4ID0gNQogICAgICAgIAogICAgICAgIGVzcC5OYW1lLlNpemUgPSAxOAogICAgICAgIGVzcC5OYW1lLkNlbnRlciA9IHRydWUKICAgICAgICBlc3AuTmFtZS5PdXRsaW5lID0gdHJ1ZQogICAgICAgIGVzcC5OYW1lLlpJbmRleCA9IDYKICAgICAgICAKICAgICAgICBlc3AuRGlzdGFuY2UuU2l6ZSA9IDE2CiAgICAgICAgZXNwLkRpc3RhbmNlLkNlbnRlciA9IHRydWUKICAgICAgICBlc3AuRGlzdGFuY2UuT3V0bGluZSA9IHRydWUKICAgICAgICBlc3AuRGlzdGFuY2UuWkluZGV4ID0gNgogICAgICAgIAogICAgICAgIGVzcC5IZWFsdGhCYXIuRmlsbGVkID0gdHJ1ZQogICAgICAgIGVzcC5IZWFsdGhCYXIuVGhpY2tuZXNzID0gMQogICAgICAgIGVzcC5IZWFsdGhCYXIuWkluZGV4ID0gNQogICAgICAgIAogICAgICAgIGVzcC5IZWFsdGhUZXh0LlNpemUgPSAxNAogICAgICAgIGVzcC5IZWFsdGhUZXh0LkNlbnRlciA9IHRydWUKICAgICAgICBlc3AuSGVhbHRoVGV4dC5PdXRsaW5lID0gdHJ1ZQogICAgICAgIGVzcC5IZWFsdGhUZXh0LlpJbmRleCA9IDYKICAgICAgICAKICAgICAgICBlc3AuVHJhY2VyLlRoaWNrbmVzcyA9IDEuNQogICAgICAgIGVzcC5UcmFjZXIuWkluZGV4ID0gNAogICAgICAgIAogICAgICAgIGVzcENhY2hlW3Bscl0gPSBlc3AKICAgICAgICByZXR1cm4gZXNwCiAgICBlbmQKCiAgICBsb2NhbCBmdW5jdGlvbiB1cGRhdGVFU1AoKQogICAgICAgIGlmIG5vdCBlc3BTZXR0aW5ncy5lbmFibGVkIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIAogICAgICAgIGZvciBfLCBwbHIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICBpZiBwbHIgPT0gTG9jYWxQbGF5ZXIgdGhlbiBjb250aW51ZSBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGVzcFNldHRpbmdzLnNob3dFbmVteU9ubHkgYW5kIGlzVGVhbW1hdGUocGxyKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBlc3BDYWNoZVtwbHJdIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgXywgb2JqIGluIHBhaXJzKGVzcENhY2hlW3Bscl0pIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCBjaGFyID0gcGxyLkNoYXJhY3RlcgogICAgICAgICAgICBpZiBub3QgY2hhciB0aGVuCiAgICAgICAgICAgICAgICBpZiBlc3BDYWNoZVtwbHJdIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgXywgb2JqIGluIHBhaXJzKGVzcENhY2hlW3Bscl0pIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgY29udGludWUgCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgcm9vdCA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICBsb2NhbCBoZWFkID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpCiAgICAgICAgICAgIGxvY2FsIGh1bWFub2lkID0gY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIG5vdCAocm9vdCBhbmQgaGVhZCBhbmQgaHVtYW5vaWQpIHRoZW4gY29udGludWUgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCByb290UG9zLCByb290VmlzID0gQ2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KHJvb3QuUG9zaXRpb24pCiAgICAgICAgICAgIGxvY2FsIGhlYWRQb3MsIGhlYWRWaXMgPSBDYW1lcmE6V29ybGRUb1ZpZXdwb3J0UG9pbnQoaGVhZC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDEuNSwgMCkpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBub3QgKHJvb3RWaXMgYW5kIGhlYWRWaXMpIHRoZW4KICAgICAgICAgICAgICAgIGlmIGVzcENhY2hlW3Bscl0gdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciBfLCBvYmogaW4gcGFpcnMoZXNwQ2FjaGVbcGxyXSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgb2JqLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsIGVzcCA9IGVzcENhY2hlW3Bscl0gb3IgY3JlYXRlRVNQT2JqZWN0KHBscikKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsIGhlaWdodCA9IG1hdGguYWJzKGhlYWRQb3MuWSAtIHJvb3RQb3MuWSkgKiAxLjUKICAgICAgICAgICAgbG9jYWwgd2lkdGggPSBoZWlnaHQgKiAwLjYKICAgICAgICAgICAgbG9jYWwgbGVmdCA9IGhlYWRQb3MuWCAtIHdpZHRoIC8gMgogICAgICAgICAgICBsb2NhbCByaWdodCA9IGhlYWRQb3MuWCArIHdpZHRoIC8gMgogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgY29sb3IgPSBnZXRUZWFtQ29sb3IocGxyKQogICAgICAgICAgICAKICAgICAgICAgICAgLS0g54us56uL5o6n5Yi25q+P5Liq5YWD57Sg55qE5pi+56S6CiAgICAgICAgICAgIGVzcC5Cb3guVmlzaWJsZSA9IGVzcFNldHRpbmdzLnNob3dCb3gKICAgICAgICAgICAgZXNwLkJveC5Db2xvciA9IGNvbG9yCiAgICAgICAgICAgIGVzcC5Cb3guUG9pbnRBID0gVmVjdG9yMi5uZXcobGVmdCwgaGVhZFBvcy5ZKQogICAgICAgICAgICBlc3AuQm94LlBvaW50QiA9IFZlY3RvcjIubmV3KHJpZ2h0LCBoZWFkUG9zLlkpCiAgICAgICAgICAgIGVzcC5Cb3guUG9pbnRDID0gVmVjdG9yMi5uZXcocmlnaHQsIGhlYWRQb3MuWSArIGhlaWdodCkKICAgICAgICAgICAgZXNwLkJveC5Qb2ludEQgPSBWZWN0b3IyLm5ldyhsZWZ0LCBoZWFkUG9zLlkgKyBoZWlnaHQpCiAgICAgICAgICAgIAogICAgICAgICAgICBlc3AuTmFtZS5WaXNpYmxlID0gZXNwU2V0dGluZ3Muc2hvd05hbWUKICAgICAgICAgICAgZXNwLk5hbWUuQ29sb3IgPSBjb2xvcgogICAgICAgICAgICBlc3AuTmFtZS5Qb3NpdGlvbiA9IFZlY3RvcjIubmV3KGhlYWRQb3MuWCwgaGVhZFBvcy5ZIC0gMjApCiAgICAgICAgICAgIGVzcC5OYW1lLlRleHQgPSBwbHIuTmFtZQogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgZGlzdGFuY2UgPSBtYXRoLmZsb29yKChyb290LlBvc2l0aW9uIC0gQ2FtZXJhLkNGcmFtZS5Qb3NpdGlvbikuTWFnbml0dWRlKQogICAgICAgICAgICBlc3AuRGlzdGFuY2UuVmlzaWJsZSA9IGVzcFNldHRpbmdzLnNob3dEaXN0YW5jZQogICAgICAgICAgICBlc3AuRGlzdGFuY2UuQ29sb3IgPSBjb2xvcgogICAgICAgICAgICBlc3AuRGlzdGFuY2UuUG9zaXRpb24gPSBWZWN0b3IyLm5ldyhoZWFkUG9zLlgsIGhlYWRQb3MuWSArIGhlaWdodCArIDUpCiAgICAgICAgICAgIGVzcC5EaXN0YW5jZS5UZXh0ID0gdG9zdHJpbmcoZGlzdGFuY2UpIC4uICJtIgogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgaGVhbHRoUGVyY2VudCA9IG1hdGguY2xhbXAoaHVtYW5vaWQuSGVhbHRoIC8gaHVtYW5vaWQuTWF4SGVhbHRoLCAwLCAxKQogICAgICAgICAgICBsb2NhbCBiYXJXaWR0aCA9IHdpZHRoCiAgICAgICAgICAgIGxvY2FsIGJhckhlaWdodCA9IDUKICAgICAgICAgICAgbG9jYWwgYmFyWCA9IGxlZnQKICAgICAgICAgICAgbG9jYWwgYmFyWSA9IGhlYWRQb3MuWSArIGhlaWdodCArIDIwCiAgICAgICAgICAgIAogICAgICAgICAgICBlc3AuSGVhbHRoQmFyLlZpc2libGUgPSBlc3BTZXR0aW5ncy5zaG93SGVhbHRoQmFyCiAgICAgICAgICAgIGVzcC5IZWFsdGhCYXIuQ29sb3IgPSBDb2xvcjMubmV3KDEgLSBoZWFsdGhQZXJjZW50LCBoZWFsdGhQZXJjZW50LCAwKQogICAgICAgICAgICBlc3AuSGVhbHRoQmFyLlBvaW50QSA9IFZlY3RvcjIubmV3KGJhclgsIGJhclkpCiAgICAgICAgICAgIGVzcC5IZWFsdGhCYXIuUG9pbnRCID0gVmVjdG9yMi5uZXcoYmFyWCArIGJhcldpZHRoICogaGVhbHRoUGVyY2VudCwgYmFyWSkKICAgICAgICAgICAgZXNwLkhlYWx0aEJhci5Qb2ludEMgPSBWZWN0b3IyLm5ldyhiYXJYICsgYmFyV2lkdGggKiBoZWFsdGhQZXJjZW50LCBiYXJZICsgYmFySGVpZ2h0KQogICAgICAgICAgICBlc3AuSGVhbHRoQmFyLlBvaW50RCA9IFZlY3RvcjIubmV3KGJhclgsIGJhclkgKyBiYXJIZWlnaHQpCiAgICAgICAgICAgIAogICAgICAgICAgICBlc3AuSGVhbHRoVGV4dC5WaXNpYmxlID0gZXNwU2V0dGluZ3Muc2hvd0hlYWx0aFRleHQKICAgICAgICAgICAgZXNwLkhlYWx0aFRleHQuQ29sb3IgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgICAgICAgICAgIGVzcC5IZWFsdGhUZXh0LlBvc2l0aW9uID0gVmVjdG9yMi5uZXcoYmFyWCArIGJhcldpZHRoIC8gMiwgYmFyWSAtIDEwKQogICAgICAgICAgICBlc3AuSGVhbHRoVGV4dC5UZXh0ID0gbWF0aC5mbG9vcihodW1hbm9pZC5IZWFsdGgpIC4uICIvIiAuLiBtYXRoLmZsb29yKGh1bWFub2lkLk1heEhlYWx0aCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGVzcC5UcmFjZXIuVmlzaWJsZSA9IGVzcFNldHRpbmdzLnNob3dUcmFjZXIKICAgICAgICAgICAgZXNwLlRyYWNlci5Db2xvciA9IGNvbG9yCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCBzdGFydFBvaW50CiAgICAgICAgICAgIGlmIGVzcFNldHRpbmdzLnRyYWNlclBvc2l0aW9uID09ICJUb3AiIHRoZW4KICAgICAgICAgICAgICAgIHN0YXJ0UG9pbnQgPSBWZWN0b3IyLm5ldyhDYW1lcmEuVmlld3BvcnRTaXplLlgvMiwgMCkKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgc3RhcnRQb2ludCA9IFZlY3RvcjIubmV3KENhbWVyYS5WaWV3cG9ydFNpemUuWC8yLCBDYW1lcmEuVmlld3BvcnRTaXplLlkpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgZW5kUG9pbnQgPSBWZWN0b3IyLm5ldyhoZWFkUG9zLlgsIGhlYWRQb3MuWSArIGhlaWdodC8yKQogICAgICAgICAgICAKICAgICAgICAgICAgZXNwLlRyYWNlci5Gcm9tID0gc3RhcnRQb2ludAogICAgICAgICAgICBlc3AuVHJhY2VyLlRvID0gZW5kUG9pbnQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBmb3IgcGxyLCBlc3AgaW4gcGFpcnMoZXNwQ2FjaGUpIGRvCiAgICAgICAgICAgIGlmIG5vdCBwbHIgb3Igbm90IHBsci5QYXJlbnQgb3IgcGxyID09IExvY2FsUGxheWVyIHRoZW4KICAgICAgICAgICAgICAgIGZvciBfLCBvYmogaW4gcGFpcnMoZXNwKSBkbwogICAgICAgICAgICAgICAgICAgIG9iai5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBvYmo6UmVtb3ZlKCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZXNwQ2FjaGVbcGxyXSA9IG5pbAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGxvY2FsIGVzcExvb3AKICAgIAogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC0tIE5QQyDpgI/op4bvvIjlop7lvLrniYjvvIktIOWNh+e6p+S4uueLrOeri+W8gOWFs+mUrgogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGxvY2FsIG5wY0VzcFNldHRpbmdzID0gewogICAgICAgIGVuYWJsZWQgPSBmYWxzZSwKICAgICAgICBzaG93Qm94ID0gdHJ1ZSwKICAgICAgICBzaG93TmFtZSA9IHRydWUsCiAgICAgICAgc2hvd0Rpc3RhbmNlID0gdHJ1ZQogICAgfQogICAgCiAgICBsb2NhbCBucGNFc3BDYWNoZSA9IHt9CiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIGNyZWF0ZU5wY0VTUE9iamVjdChtb2RlbCkKICAgICAgICBsb2NhbCBlc3AgPSB7CiAgICAgICAgICAgIEJveCA9IERyYXdpbmcubmV3KCJRdWFkIiksCiAgICAgICAgICAgIE5hbWUgPSBEcmF3aW5nLm5ldygiVGV4dCIpLAogICAgICAgICAgICBEaXN0YW5jZSA9IERyYXdpbmcubmV3KCJUZXh0IikKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZXNwLkJveC5UaGlja25lc3MgPSAxLjUKICAgICAgICBlc3AuQm94LkZpbGxlZCA9IGZhbHNlCiAgICAgICAgZXNwLkJveC5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMTY1LCAwKQogICAgICAgIGVzcC5Cb3guWkluZGV4ID0gNAogICAgICAgIAogICAgICAgIGVzcC5OYW1lLlNpemUgPSAxNgogICAgICAgIGVzcC5OYW1lLkNlbnRlciA9IHRydWUKICAgICAgICBlc3AuTmFtZS5PdXRsaW5lID0gdHJ1ZQogICAgICAgIGVzcC5OYW1lLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAxNjUsIDApCiAgICAgICAgZXNwLk5hbWUuWkluZGV4ID0gNAogICAgICAgIAogICAgICAgIGVzcC5EaXN0YW5jZS5TaXplID0gMTQKICAgICAgICBlc3AuRGlzdGFuY2UuQ2VudGVyID0gdHJ1ZQogICAgICAgIGVzcC5EaXN0YW5jZS5PdXRsaW5lID0gdHJ1ZQogICAgICAgIGVzcC5EaXN0YW5jZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMTY1LCAwKQogICAgICAgIGVzcC5EaXN0YW5jZS5aSW5kZXggPSA0CiAgICAgICAgCiAgICAgICAgbnBjRXNwQ2FjaGVbbW9kZWxdID0gZXNwCiAgICAgICAgcmV0dXJuIGVzcAogICAgZW5kCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIHVwZGF0ZU5wY0VTUCgpCiAgICAgICAgaWYgbm90IG5wY0VzcFNldHRpbmdzLmVuYWJsZWQgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgCiAgICAgICAgZm9yIF8sIG1vZGVsIGluIGlwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgbW9kZWw6SXNBKCJNb2RlbCIpIGFuZCBtb2RlbDpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikgYW5kIG5vdCBQbGF5ZXJzOkdldFBsYXllckZyb21DaGFyYWN0ZXIobW9kZWwpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHJvb3QgPSBtb2RlbDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIG9yIG1vZGVsOkZpbmRGaXJzdENoaWxkKCJUb3JzbyIpCiAgICAgICAgICAgICAgICBsb2NhbCBoZWFkID0gbW9kZWw6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBub3QgKHJvb3QgYW5kIGhlYWQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBucGNFc3BDYWNoZVttb2RlbF0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgb2JqIGluIHBhaXJzKG5wY0VzcENhY2hlW21vZGVsXSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCByb290UG9zLCByb290VmlzID0gQ2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KHJvb3QuUG9zaXRpb24pCiAgICAgICAgICAgICAgICBsb2NhbCBoZWFkUG9zLCBoZWFkVmlzID0gQ2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KGhlYWQuUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLCAxLjUsIDApKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBub3QgKHJvb3RWaXMgYW5kIGhlYWRWaXMpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBucGNFc3BDYWNoZVttb2RlbF0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgb2JqIGluIHBhaXJzKG5wY0VzcENhY2hlW21vZGVsXSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBlc3AgPSBucGNFc3BDYWNoZVttb2RlbF0gb3IgY3JlYXRlTnBjRVNQT2JqZWN0KG1vZGVsKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBoZWlnaHQgPSBtYXRoLmFicyhoZWFkUG9zLlkgLSByb290UG9zLlkpICogMS41CiAgICAgICAgICAgICAgICBsb2NhbCB3aWR0aCA9IGhlaWdodCAqIDAuNgogICAgICAgICAgICAgICAgbG9jYWwgbGVmdCA9IGhlYWRQb3MuWCAtIHdpZHRoIC8gMgogICAgICAgICAgICAgICAgbG9jYWwgcmlnaHQgPSBoZWFkUG9zLlggKyB3aWR0aCAvIDIKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZXNwLkJveC5WaXNpYmxlID0gbnBjRXNwU2V0dGluZ3Muc2hvd0JveAogICAgICAgICAgICAgICAgZXNwLkJveC5Qb2ludEEgPSBWZWN0b3IyLm5ldyhsZWZ0LCBoZWFkUG9zLlkpCiAgICAgICAgICAgICAgICBlc3AuQm94LlBvaW50QiA9IFZlY3RvcjIubmV3KHJpZ2h0LCBoZWFkUG9zLlkpCiAgICAgICAgICAgICAgICBlc3AuQm94LlBvaW50QyA9IFZlY3RvcjIubmV3KHJpZ2h0LCBoZWFkUG9zLlkgKyBoZWlnaHQpCiAgICAgICAgICAgICAgICBlc3AuQm94LlBvaW50RCA9IFZlY3RvcjIubmV3KGxlZnQsIGhlYWRQb3MuWSArIGhlaWdodCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZXNwLk5hbWUuVmlzaWJsZSA9IG5wY0VzcFNldHRpbmdzLnNob3dOYW1lCiAgICAgICAgICAgICAgICBlc3AuTmFtZS5Qb3NpdGlvbiA9IFZlY3RvcjIubmV3KGhlYWRQb3MuWCwgaGVhZFBvcy5ZIC0gMTUpCiAgICAgICAgICAgICAgICBlc3AuTmFtZS5UZXh0ID0gbW9kZWwuTmFtZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBkaXN0YW5jZSA9IG1hdGguZmxvb3IoKHJvb3QuUG9zaXRpb24gLSBDYW1lcmEuQ0ZyYW1lLlBvc2l0aW9uKS5NYWduaXR1ZGUpCiAgICAgICAgICAgICAgICBlc3AuRGlzdGFuY2UuVmlzaWJsZSA9IG5wY0VzcFNldHRpbmdzLnNob3dEaXN0YW5jZQogICAgICAgICAgICAgICAgZXNwLkRpc3RhbmNlLlBvc2l0aW9uID0gVmVjdG9yMi5uZXcoaGVhZFBvcy5YLCBoZWFkUG9zLlkgKyBoZWlnaHQgKyA1KQogICAgICAgICAgICAgICAgZXNwLkRpc3RhbmNlLlRleHQgPSB0b3N0cmluZyhkaXN0YW5jZSkgLi4gIm0iCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGZvciBtb2RlbCwgZXNwIGluIHBhaXJzKG5wY0VzcENhY2hlKSBkbwogICAgICAgICAgICBpZiBub3QgbW9kZWwgb3Igbm90IG1vZGVsLlBhcmVudCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgXywgb2JqIGluIHBhaXJzKGVzcCkgZG8KICAgICAgICAgICAgICAgICAgICBvYmouVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgb2JqOlJlbW92ZSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIG5wY0VzcENhY2hlW21vZGVsXSA9IG5pbAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICBsb2NhbCBucGNFc3BMb29wCiAgICAKICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAtLSDpgI/op4blip/og73ni6znq4vmoIfnrb7pobUgLSDljYfnuqfkuLrni6znq4vlvIDlhbPplK7niYjmnKwKICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBsb2NhbCBUYWI0ID0gV2luZG93OkNyZWF0ZVRhYigi6YCP6KeG5Yqf6IO9IiwgNzczMzk2MTc0OSkKICAgIAogICAgVGFiNDpDcmVhdGVTZWN0aW9uKCLnjqnlrrbpgI/op4borr7nva4iKQogICAgVGFiNDpDcmVhdGVUb2dnbGUoewogICAgICAgIE5hbWUgPSAi5ZCv55So546p5a626YCP6KeGIiwgCiAgICAgICAgQ3VycmVudFZhbHVlID0gZXNwU2V0dGluZ3MuZW5hYmxlZCwgCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2KQogICAgICAgICAgICBlc3BTZXR0aW5ncy5lbmFibGVkID0gdgogICAgICAgICAgICBpZiB2IHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBlc3BMb29wIHRoZW4KICAgICAgICAgICAgICAgICAgICBlc3BMb29wID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuUmVuZGVyU3RlcHBlZDpDb25uZWN0KHVwZGF0ZUVTUCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBpZiBlc3BMb29wIHRoZW4KICAgICAgICAgICAgICAgICAgICBlc3BMb29wOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgICAgIGVzcExvb3AgPSBuaWwKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZm9yIHBsciwgZXNwIGluIHBhaXJzKGVzcENhY2hlKSBkbwogICAgICAgICAgICAgICAgICAgIGZvciBfLCBvYmogaW4gcGFpcnMoZXNwKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIG9iajpSZW1vdmUoKSBlbmQpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIHRhYmxlLmNsZWFyKGVzcENhY2hlKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIH0pCgogICAgVGFiNDpDcmVhdGVTZWN0aW9uKCLnjqnlrrbpgI/op4blhYPntKAiKQogICAgVGFiNDpDcmVhdGVUb2dnbGUoewogICAgICAgIE5hbWUgPSAi5pi+56S65pa55qGGIiwKICAgICAgICBDdXJyZW50VmFsdWUgPSBlc3BTZXR0aW5ncy5zaG93Qm94LAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odikKICAgICAgICAgICAgZXNwU2V0dGluZ3Muc2hvd0JveCA9IHYKICAgICAgICBlbmQKICAgIH0pCgogICAgVGFiNDpDcmVhdGVUb2dnbGUoewogICAgICAgIE5hbWUgPSAi5pi+56S65ZCN5a2XIiwKICAgICAgICBDdXJyZW50VmFsdWUgPSBlc3BTZXR0aW5ncy5zaG93TmFtZSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYpCiAgICAgICAgICAgIGVzcFNldHRpbmdzLnNob3dOYW1lID0gdgogICAgICAgIGVuZAogICAgfSkKCiAgICBUYWI0OkNyZWF0ZVRvZ2dsZSh7CiAgICAgICAgTmFtZSA9ICLmmL7npLrot53nprsiLAogICAgICAgIEN1cnJlbnRWYWx1ZSA9IGVzcFNldHRpbmdzLnNob3dEaXN0YW5jZSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYpCiAgICAgICAgICAgIGVzcFNldHRpbmdzLnNob3dEaXN0YW5jZSA9IHYKICAgICAgICBlbmQKICAgIH0pCgogICAgVGFiNDpDcmVhdGVUb2dnbGUoewogICAgICAgIE5hbWUgPSAi5pi+56S66KGA5p2hIiwKICAgICAgICBDdXJyZW50VmFsdWUgPSBlc3BTZXR0aW5ncy5zaG93SGVhbHRoQmFyLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odikKICAgICAgICAgICAgZXNwU2V0dGluZ3Muc2hvd0hlYWx0aEJhciA9IHYKICAgICAgICBlbmQKICAgIH0pCgogICAgVGFiNDpDcmVhdGVUb2dnbGUoewogICAgICAgIE5hbWUgPSAi5pi+56S66KGA6YeP5paH5a2XIiwKICAgICAgICBDdXJyZW50VmFsdWUgPSBlc3BTZXR0aW5ncy5zaG93SGVhbHRoVGV4dCwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYpCiAgICAgICAgICAgIGVzcFNldHRpbmdzLnNob3dIZWFsdGhUZXh0ID0gdgogICAgICAgIGVuZAogICAgfSkKCiAgICBUYWI0OkNyZWF0ZVRvZ2dsZSh7CiAgICAgICAgTmFtZSA9ICLmmL7npLrov73ouKrnur/mnaEiLAogICAgICAgIEN1cnJlbnRWYWx1ZSA9IGVzcFNldHRpbmdzLnNob3dUcmFjZXIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2KQogICAgICAgICAgICBlc3BTZXR0aW5ncy5zaG93VHJhY2VyID0gdgogICAgICAgIGVuZAogICAgfSkKCiAgICBUYWI0OkNyZWF0ZURyb3Bkb3duKHsKICAgICAgICBOYW1lID0gIue6v+adoeS9jee9riIsCiAgICAgICAgT3B0aW9ucyA9IHsiVG9wIiwgIkJvdHRvbSJ9LAogICAgICAgIEN1cnJlbnRPcHRpb24gPSBlc3BTZXR0aW5ncy50cmFjZXJQb3NpdGlvbiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlKQogICAgICAgICAgICBlc3BTZXR0aW5ncy50cmFjZXJQb3NpdGlvbiA9IHZhbHVlCiAgICAgICAgZW5kCiAgICB9KQoKICAgIFRhYjQ6Q3JlYXRlVG9nZ2xlKHsKICAgICAgICBOYW1lID0gIuWPquaYvuekuuaVjOS6uiIsCiAgICAgICAgQ3VycmVudFZhbHVlID0gZXNwU2V0dGluZ3Muc2hvd0VuZW15T25seSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYpCiAgICAgICAgICAgIGVzcFNldHRpbmdzLnNob3dFbmVteU9ubHkgPSB2CiAgICAgICAgZW5kCiAgICB9KQogICAgCiAgICBUYWI0OkNyZWF0ZVNlY3Rpb24oIk5QQ+mAj+inhuiuvue9riIpCiAgICBUYWI0OkNyZWF0ZVRvZ2dsZSh7CiAgICAgICAgTmFtZSA9ICLlkK/nlKhOUEPpgI/op4YiLCAKICAgICAgICBDdXJyZW50VmFsdWUgPSBucGNFc3BTZXR0aW5ncy5lbmFibGVkLCAKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYpCiAgICAgICAgICAgIG5wY0VzcFNldHRpbmdzLmVuYWJsZWQgPSB2CiAgICAgICAgICAgIGlmIHYgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IG5wY0VzcExvb3AgdGhlbgogICAgICAgICAgICAgICAgICAgIG5wY0VzcExvb3AgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QodXBkYXRlTnBjRVNQKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGlmIG5wY0VzcExvb3AgdGhlbgogICAgICAgICAgICAgICAgICAgIG5wY0VzcExvb3A6RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgICAgICAgbnBjRXNwTG9vcCA9IG5pbAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBmb3IgbW9kZWwsIGVzcCBpbiBwYWlycyhucGNFc3BDYWNoZSkgZG8KICAgICAgICAgICAgICAgICAgICBmb3IgXywgb2JqIGluIHBhaXJzKGVzcCkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBvYmo6UmVtb3ZlKCkgZW5kKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICB0YWJsZS5jbGVhcihucGNFc3BDYWNoZSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICB9KQogICAgCiAgICBUYWI0OkNyZWF0ZVNlY3Rpb24oIk5QQ+mAj+inhuWFg+e0oCIpCiAgICBUYWI0OkNyZWF0ZVRvZ2dsZSh7CiAgICAgICAgTmFtZSA9ICLmmL7npLrmlrnmoYYiLAogICAgICAgIEN1cnJlbnRWYWx1ZSA9IG5wY0VzcFNldHRpbmdzLnNob3dCb3gsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2KQogICAgICAgICAgICBucGNFc3BTZXR0aW5ncy5zaG93Qm94ID0gdgogICAgICAgIGVuZAogICAgfSkKCiAgICBUYWI0OkNyZWF0ZVRvZ2dsZSh7CiAgICAgICAgTmFtZSA9ICLmmL7npLrlkI3lrZciLAogICAgICAgIEN1cnJlbnRWYWx1ZSA9IG5wY0VzcFNldHRpbmdzLnNob3dOYW1lLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odikKICAgICAgICAgICAgbnBjRXNwU2V0dGluZ3Muc2hvd05hbWUgPSB2CiAgICAgICAgZW5kCiAgICB9KQoKICAgIFRhYjQ6Q3JlYXRlVG9nZ2xlKHsKICAgICAgICBOYW1lID0gIuaYvuekuui3neemuyIsCiAgICAgICAgQ3VycmVudFZhbHVlID0gbnBjRXNwU2V0dGluZ3Muc2hvd0Rpc3RhbmNlLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odikKICAgICAgICAgICAgbnBjRXNwU2V0dGluZ3Muc2hvd0Rpc3RhbmNlID0gdgogICAgICAgIGVuZAogICAgfSkKICAgIAogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC0tIOS4iemUgeWumu+8muenu+mAnyAvIOi3s+i3gyAvIOmHjeWKmwogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGxvY2FsIGxvY2tTcGVlZCwgbG9ja0p1bXAsIGxvY2tHcmF2ID0gZmFsc2UsIGZhbHNlLCBmYWxzZQogICAgbG9jYWwgc2F2ZWRTcGVlZCwgc2F2ZWRKdW1wLCBzYXZlZEdyYXYgPSAxNiwgNTAsIDE5NgogICAgCiAgICBsb2NhbCBmdW5jdGlvbiBhcHBseVZhbHVlcygpCiAgICAgICAgbG9jYWwgY2hhciA9IExvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgIGlmIG5vdCBjaGFyIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIAogICAgICAgIGxvY2FsIGh1bSA9IGNoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgaWYgbm90IGh1bSB0aGVuIHJldHVybiBlbmQKICAgICAgICAKICAgICAgICBpZiBsb2NrU3BlZWQgdGhlbiBodW0uV2Fsa1NwZWVkID0gc2F2ZWRTcGVlZCBlbmQKICAgICAgICBpZiBsb2NrSnVtcCB0aGVuIGh1bS5KdW1wUG93ZXIgPSBzYXZlZEp1bXAgZW5kCiAgICAgICAgaWYgbG9ja0dyYXYgdGhlbiB3b3Jrc3BhY2UuR3Jhdml0eSA9IHNhdmVkR3JhdiBlbmQKICAgIGVuZAogICAgCiAgICBMb2NhbFBsYXllci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgIGFwcGx5VmFsdWVzKCkKICAgIGVuZCkKICAgIAogICAgVGFiMjpDcmVhdGVTZWN0aW9uKCLkuInplIHlrpoiKQogICAgVGFiMjpDcmVhdGVJbnB1dCh7CiAgICAgICAgTmFtZSA9ICLorr7lrprnp7vpgJ/vvIjku4Xkv53lrZjlgLzvvIkiLCAKICAgICAgICBQbGFjZWhvbGRlclRleHQgPSB0b3N0cmluZyhzYXZlZFNwZWVkKSwKICAgICAgICBSZW1vdmVUZXh0QWZ0ZXJGb2N1c0xvc3QgPSBmYWxzZSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHR4dCkgCiAgICAgICAgICAgIHNhdmVkU3BlZWQgPSB0b251bWJlcih0eHQpIG9yIDE2IAogICAgICAgICAgICBhcHBseVZhbHVlcygpCiAgICAgICAgZW5kCiAgICB9KQogICAgCiAgICBUYWIyOkNyZWF0ZUlucHV0KHsKICAgICAgICBOYW1lID0gIuiuvuWumui3s+i3g+mrmOW6pu+8iOS7heS/neWtmOWAvO+8iSIsIAogICAgICAgIFBsYWNlaG9sZGVyVGV4dCA9IHRvc3RyaW5nKHNhdmVkSnVtcCksCiAgICAgICAgUmVtb3ZlVGV4dEFmdGVyRm9jdXNMb3N0ID0gZmFsc2UsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih0eHQpIAogICAgICAgICAgICBzYXZlZEp1bXAgPSB0b251bWJlcih0eHQpIG9yIDUwIAogICAgICAgICAgICBhcHBseVZhbHVlcygpCiAgICAgICAgZW5kCiAgICB9KQogICAgCiAgICBUYWIyOkNyZWF0ZUlucHV0KHsKICAgICAgICBOYW1lID0gIuiuvuWumumHjeWKm+WAvO+8iOS7heS/neWtmOWAvO+8iSIsIAogICAgICAgIFBsYWNlaG9sZGVyVGV4dCA9IHRvc3RyaW5nKHNhdmVkR3JhdiksCiAgICAgICAgUmVtb3ZlVGV4dEFmdGVyRm9jdXNMb3N0ID0gZmFsc2UsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih0eHQpIAogICAgICAgICAgICBzYXZlZEdyYXYgPSB0b251bWJlcih0eHQpIG9yIDE5NiAKICAgICAgICAgICAgYXBwbHlWYWx1ZXMoKQogICAgICAgIGVuZAogICAgfSkKICAgIAogICAgVGFiMjpDcmVhdGVUb2dnbGUoewogICAgICAgIE5hbWUgPSAi6ZSB5a6a56e76YCfIiwgCiAgICAgICAgQ3VycmVudFZhbHVlID0gZmFsc2UsIAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odikgCiAgICAgICAgICAgIGxvY2tTcGVlZCA9IHYKICAgICAgICAgICAgYXBwbHlWYWx1ZXMoKQogICAgICAgIGVuZAogICAgfSkKICAgIAogICAgVGFiMjpDcmVhdGVUb2dnbGUoewogICAgICAgIE5hbWUgPSAi6ZSB5a6a6Lez6LeDIiwgCiAgICAgICAgQ3VycmVudFZhbHVlID0gZmFsc2UsIAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odikgCiAgICAgICAgICAgIGxvY2tKdW1wID0gdgogICAgICAgICAgICBhcHBseVZhbHVlcygpCiAgICAgICAgZW5kCiAgICB9KQogICAgCiAgICBUYWIyOkNyZWF0ZVRvZ2dsZSh7CiAgICAgICAgTmFtZSA9ICLplIHlrprph43lipsiLCAKICAgICAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwgCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2KSAKICAgICAgICAgICAgbG9ja0dyYXYgPSB2CiAgICAgICAgICAgIGFwcGx5VmFsdWVzKCkKICAgICAgICBlbmQKICAgIH0pCiAgICAKICAgIC0tIFZS6ISa5pysIFRhYgogICAgbG9jYWwgVGFiNSA9IFdpbmRvdzpDcmVhdGVUYWIoIlZSIiwgNzczMzc3OTYxMCkKICAgIFRhYjU6Q3JlYXRlQnV0dG9uKHtOYW1lID0gIkZFVlLohJrmnKwiLCBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3JhbmRvbXN0cmluZzAvUXdlcnR5L3JlZnMvaGVhZHMvbWFpbi9xd2VydHk0NS5sdWEiKSkoKQogICAgZW5kfSkKCiAgICAtLSDmjqfliLblj7AgVGFiCiAgICBsb2NhbCBUYWI2ID0gV2luZG93OkNyZWF0ZVRhYigi5o6n5Yi25Y+wIiwgNzczMzc3OTYxMCkKICAgIFRhYjY6Q3JlYXRlQnV0dG9uKHtOYW1lID0gIuaOp+WItuWPsOiEmuacrCIsIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20veXhnaDE2NS95eGdoMTY1L21haW4vNjY2IikpKCkKICAgIGVuZH0pCiAgICAKICAgIC0tIFhB6ISa5pysIFRhYgogICAgbG9jYWwgVGFiNyA9IFdpbmRvdzpDcmVhdGVUYWIoIlhB6ISa5pysIiwgNzczMzc3OTYxMCkKICAgIFRhYjc6Q3JlYXRlQnV0dG9uKHtOYW1lID0gIlhBIEhVQiIsIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRjb2RlLmNvbS9YaW5ndGFpZHVhbi9TY3JpcHRzL3Jhdy9tYWluL0xvYWRlci5sdWEiKSkoKQogICAgZW5kfSkKICAgIAogICAgLS0gUkLohJrmnKzkuK3lv4MgVGFiCiAgICBsb2NhbCBUYWI4ID0gV2luZG93OkNyZWF0ZVRhYigiUkLohJrmnKwiLCA3NzMzNzc5NjEwKQogICAgVGFiODpDcmVhdGVCdXR0b24oe05hbWUgPSAiUmLohJrmnKwiLCBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1l1bmdlbmd4aW4vcm9ibG94L3JlZnMvaGVhZHMvbWFpbi9SYi1IdWIiKSkoKQogICAgZW5kfSkKICAgIAogICAgLS0g55Sf5a2Y5LiO5p2A5omLIFRhYgogICAgbG9jYWwgVGFiOSA9IFdpbmRvdzpDcmVhdGVUYWIoIueUn+WtmOS4juadgOaJiyIsIDc3MzM3Nzk2MTApCiAgICBUYWI5OkNyZWF0ZUJ1dHRvbih7TmFtZSA9ICLnlJ/lrZjkuI7mnYDmiYsiLCBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL01pbGFuMDhTdHVkaW8vQ2hhaXJXYXJlL21haW4vbWFpbi5sdWEiKSkoKQogICAgZW5kfSkKICAgIAogICAgLS0g54ix5b635Y2OIFRhYgogICAgbG9jYWwgVGFiMTAgPSBXaW5kb3c6Q3JlYXRlVGFiKCLniLHlvrfljY4iLCA3NzMzNzc5NjEwKQogICAgVGFiMTA6Q3JlYXRlQnV0dG9uKHtOYW1lID0gIueIseW+t+WNjiIsIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZ3VtYW5iYS9TY3JpcHRzL21haW4vRWR3YXJkIikpKCkKICAgIGVuZH0pCiAgICAKICAgIC0tIOa0u+S6hjflpKkgVGFiCiAgICBsb2NhbCBUYWIxMSA9IFdpbmRvdzpDcmVhdGVUYWIoIua0u+S6hjflpKkiLCA3NzMzNzc5NjEwKQogICAgVGFiMTE6Q3JlYXRlQnV0dG9uKHtOYW1lID0gIua0u+S6hjflpKkiLCBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXdzY3JpcHRzLm5ldC9yYXcvVW5pdmVyc2FsLVNjcmlwdC03LWRheXMtdG8tbGl2ZS0zNjgyNCIpKSgpCiAgICBlbmR9KQogICAgCiAgICAtLSDmrbvpk4HovaggVGFiCiAgICBsb2NhbCBUYWIxMiA9IFdpbmRvdzpDcmVhdGVUYWIoIuatu+mTgei9qCIsIDc3MzM5Nzk2MTApCiAgICBUYWIxMjpDcmVhdGVCdXR0b24oe05hbWUgPSAi5q276ZOB6L2oIiwgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9pb3Bqa2xibm1zc3MvU2Fuc0h1YlNjcmlwdC9yZWZzL2hlYWRzL21haW4vU2Fuc0h1YiIpKSgpCiAgICBlbmR9KQoKICAgIC0tIOS4gOi3r+WQkeilv+WIt+mSsSBUYWIKICAgIGxvY2FsIFRhYjEzID0gV2luZG93OkNyZWF0ZVRhYigi5LiA6Lev5ZCR6KW/IiwgNzczMzk3OTYxMCkKICAgIFRhYjEzOkNyZWF0ZUJ1dHRvbih7TmFtZSA9ICLkuIDot6/lkJHopb/liLfpkrEiLCBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3l4Z2gxNjUveXhnaDE2NS9tYWluL+S4gOi3r+WQkeilvyIpKSgpCiAgICBlbmR9KQogICAgICAgIAogICAgLS0g6Ieq54S254G+5a6zIFRhYgogICAgbG9jYWwgVGFiMTQgPSBXaW5kb3c6Q3JlYXRlVGFiKCLoh6rnhLbngb7lrrMiLCA3NzMzOTc5NjEwKQogICAgVGFiMTQ6Q3JlYXRlQnV0dG9uKHtOYW1lID0gIuiHqueEtueBvuWus+m7kea0nnY2IiwgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3c2NyaXB0cy5uZXQvcmF3L1VuaXZlcnNhbC1TY3JpcHQtU3VwZXItcmluZy1QYXJ0cy1WNi0yODU4MSIpKSgpCiAgICBlbmR9KQoKLS0g5L+E5Lql5L+E5beeIFRhYgogICAgbG9jYWwgVGFiMTUgPSBXaW5kb3c6Q3JlYXRlVGFiKCLkv4TkuqXkv4Tlt54iLCA3NzMzOTc5NjEwKQogICAgVGFiMTU6Q3JlYXRlQnV0dG9uKHtOYW1lID0gIlhB5L+E5Lql5L+E5beeIiwgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9YaW5ndGFpZHVhbi9TY3JpcHQvcmVmcy9oZWFkcy9tYWluL0dhbWVzL+S/hOS6peS/hOW3ni5sdWEiKSkoKQogICAgZW5kfSkKCi0tIOWiqOawtOa4uOaIjyBUYWIKICAgIGxvY2FsIFRhYjE2ID0gV2luZG93OkNyZWF0ZVRhYigi5aKo5rC05ri45oiPIiwgNzczMzk3OTYxMCkKICAgIFRhYjE2OkNyZWF0ZUJ1dHRvbih7TmFtZSA9ICJYQeWiqOawtOa4uOaIjyIsIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vWGluZ3RhaWR1YW4vU2NyaXB0L3JlZnMvaGVhZHMvbWFpbi9HYW1lcy/loqjmsLTmuLjmiI8ubHVhIikpKCkKICAgIGVuZH0pCgotLSA5OeWknCBUYWIKICAgIGxvY2FsIFRhYjE3ID0gV2luZG93OkNyZWF0ZVRhYigiOTnlpJwiLCA3NzMzOTc5NjEwKQogICAgVGFiMTc6Q3JlYXRlQnV0dG9uKHtOYW1lID0gIlhBOTnlpJwiLCBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1hpbmd0YWlkdWFuL1NjcmlwdC9yZWZzL2hlYWRzL21haW4vR2FtZXMv5qOu5p6X5Lit55qEOTnlpJwubHVhIikpKCkKICAgIGVuZH0pCgotLSBkb29ycyBUYWIKICAgIGxvY2FsIFRhYjE4ID0gV2luZG93OkNyZWF0ZVRhYigiZG9vcnMiLCA3NzMzOTc5NjEwKQogICAgVGFiMTg6Q3JlYXRlQnV0dG9uKHtOYW1lID0gImRvb3Jz5rGJ5YyWIiwgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcGFzdGViaW4uY29tL3Jhdy82NVR3VDhqYSIpKSgpCiAgICBlbmR9KQoKLS0g54OC5qKX56S+5Yy6IFRhYgogICAgbG9jYWwgVGFiMTkgPSBXaW5kb3c6Q3JlYXRlVGFiKCLng4LmopfnpL7ljLoiLCA3NzMzOTc5NjEwKQogICAgVGFiMTk6Q3JlYXRlQnV0dG9uKHtOYW1lID0gIueDguail+ekvuWMuuWIt+mSsSIsIENhbGxiYWNrID0gZnVuY3Rpb24oKQogbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoKCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vWE9UUlhPTlkvRWFzeVNjcmlwdC9tYWluL1N1YW8ubHVhdScpKSgpCiAgICBlbmR9KQoKICAgIC0tIOiuvue9rlRhYgogICAgbG9jYWwgVGFiMjAgPSBXaW5kb3c6Q3JlYXRlVGFiKCLorr7nva4iLCA3NzMzNzc5NjEwKQogICAgVGFiMjA6Q3JlYXRlQnV0dG9uKHsKICAgICAgICBOYW1lID0gIuS4gOmUruWkjeWItkRpc2NvcmTpk77mjqUiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCBkaXNjb3JkTGluayA9ICJodHRwczovL2Rpc2NvcmQuZ2cveFZVZjdIOU0iCiAgICAgICAgICAgIGxvY2FsIHN1Y2Nlc3MgPSBDb3B5VG9DbGlwYm9hcmQoZGlzY29yZExpbmspCiAgICAgICAgICAgIFNob3dDb3B5Tm90aWZpY2F0aW9uKHN1Y2Nlc3MsIGRpc2NvcmRMaW5rKQogICAgICAgIGVuZAogICAgfSkKICAgIAogICAgLS0g5b+N6ICF5rOo5YWl5Zmo5YW85a655oCn5qOA5p+lCiAgICBpZiBpZGVudGlmeWV4ZWN1dG9yIGFuZCBpZGVudGlmeWV4ZWN1dG9yKCk6bG93ZXIoKTpmaW5kKCJuaW5qYSIpIHRoZW4KICAgICAgICBSYXlmaWVsZDpOb3RpZnkoewogICAgICAgICAgICBUaXRsZSA9ICLms6jlhaXlmajmo4DmtYsiLAogICAgICAgICAgICBDb250ZW50ID0gIuW/jeiAheazqOWFpeWZqOW3suivhuWIq++8jOaJgOacieWKn+iDveWFvOWuuSIsCiAgICAgICAgICAgIER1cmF0aW9uID0gMywKICAgICAgICAgICAgSW1hZ2UgPSA0NDgzMzYyNDU4CiAgICAgICAgfSkKICAgIGVuZAogICAgCiAgICAtLSDpqozor4HpgJrov4flkI7mkq3mlL7liqjnlLsKICAgIENyZWF0ZUt1bkt1bkFuaW1hdGlvbigpCmVuZAoKLS0g55u05o6l5Yib5bu65Li756qX5Y+j5YaF5a65CkNyZWF0ZU1haW5XaW5kb3dDb250ZW50KCk=")
loadstring(decoded)()
